(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"0aab":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=(t._self._c,t.__map(t.inputTips,function(e,i){var n=t.highLight(e.title,t.searchText);return{$orig:t.__get_orig(e),m0:n}}));t.$mp.data=Object.assign({},{$root:{l0:i}})},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"0e8c":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"127c":function(t,e,i){"use strict";i.r(e);var n=i("0aab"),a=i("6703");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i("a449");var o=i("2877"),s=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},1475:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},2379:function(t,e,i){"use strict";i.r(e);var n=i("c2ff");for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);i("2470");var r,o,s=i("2877"),c=Object(s["a"])(n["default"],r,o,!1,null,null,null);e["default"]=c.exports},2470:function(t,e,i){"use strict";var n=i("c132"),a=i.n(n);a.a},"2e30":function(t,e,i){"use strict";i.r(e);var n=i("6422"),a=i("e04d");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i("c371");var o=i("2877"),s=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},"3c8a":function(t,e,i){"use strict";i.r(e);var n=i("1475"),a=i("7cc2");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i("7efc");var o=i("2877"),s=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},4044:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(i("66fd")),a=r(i("9626"));function r(t){return t&&t.__esModule?t:{default:t}}var o={onLaunch:function(){this.$store.dispatch("requestUserLocation")},onShow:function(){this.setCustomBarHeight(),a.default.getToken()?this.$store.dispatch("setAuthUser"):a.default.getRefreshToken()?this.$store.dispatch("refreshToken"):this.$store.dispatch("getNewToken")},onHide:function(){},methods:{setCustomBarHeight:function(){t.getSystemInfo({success:function(t){n.default.prototype.StatusBar=t.statusBarHeight;var e=qq.getMenuButtonBoundingClientRect();"{}"!=JSON.stringify(e)?(n.default.prototype.Custom=e,n.default.prototype.CustomBar=e.bottom+e.top-t.statusBarHeight+5):n.default.prototype.CustomBar=72}})}}};e.default=o}).call(this,i("a821")["default"])},4709:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(i("66fd")),a=i("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){s(t,e,i[e])})}return t}function s(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var c=function(){return i.e("components/waterfall-flow/waterfall-flow").then(i.bind(null,"feaa"))},u={components:{WaterfallFlow:c},data:function(){return{displayCategory:!1,categoryList:[],currentCategory:{},currentCategoryId:-1,categoryName:"",commodityList:[],scroll_height:700,loading:!1,links:{},loadFinish:!1,initList:!1,noResult:!1}},computed:o({},(0,a.mapState)({map_poi:function(t){return t.MapPoi}})),watch:{"$store.state.MapPoi.search_commodity":function(){var t=this;""!=this.map_poi.search_commodity&&(this.prepareForRequest(),n.default.prototype.$http.request({url:"/commodities/search",method:"POST",params:{search_keyword:this.map_poi.search_commodity}}).then(function(e){t.commodityList=e.data.data,t.links=e.data.links,setTimeout(function(){t.loading=!1},200)}).catch(function(e){t.noResult=!0,t.loading=!1}))}},mounted:function(){var t=this;this.loading=!0,this.getCategory(),this.loadCategoryCommodity(!0),setTimeout(function(){t.getHeight()},100)},methods:{navigateCommodity:function(e){t.navigateTo({url:"/pages/commodity/commodity?commodity_id="+e})},navigateSearch:function(){t.navigateTo({url:"/pages/search-commodity/search-commodity"})},getCategory:function(){var t=this;n.default.prototype.$http.get("/categories/get").then(function(e){t.categoryList=e.data.data.categories})},prepareForRequest:function(){this.commodityList=[],this.loadFinish=!1,this.initList=!this.initList,this.noResult=!1,this.loading=!0,this.$store.dispatch("clearSearchCommodity")},loadCategoryCommodity:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||this.prepareForRequest(),-1==this.currentCategoryId?n.default.prototype.$http.request({url:"/commodities/recommend",method:"POST"}).then(function(e){t.commodityList=e.data.data,t.links=e.data.links,setTimeout(function(){t.loading=!1},200)}).catch(function(e){t.noResult=!0,t.loading=!1}):n.default.prototype.$http.request({url:"/commodities/category",method:"POST",params:{category_id:this.currentCategoryId}}).then(function(e){t.commodityList=e.data.data,t.links=e.data.links,setTimeout(function(){t.loading=!1},200)}).catch(function(e){t.noResult=!0,t.loading=!1})},loadNextPage:function(t){var e=this;if(this.loading=!0,!this.links.next)return this.loadFinish=!0,void(this.loading=!1);n.default.prototype.$http.post(this.links.next).then(function(t){e.commodityList.push.apply(e.commodityList,t.data.data),e.links=t.data.links,setTimeout(function(){e.loading=!1},200)})},getHeight:function(){var e=this;t.getSystemInfo({success:function(i){e.screen_height=i.windowHeight;var n=t.createSelectorQuery().in(e);n.select("#commodities").boundingClientRect(function(t){e.scroll_height=e.screen_height-t.top-55}).exec()}})},ChangeCategory:function(t){if(-1==t){if(t==this.currentCategoryId)return void this.hideModal();this.currentCategoryId=-1,this.categoryName="全部推荐",this.loadCategoryCommodity(),this.hideModal()}else{if(this.categoryList[t].category_id==this.currentCategoryId)return void this.hideModal();this.currentCategoryId=this.categoryList[t].category_id,this.categoryName=this.categoryList[t].category_name,this.loadCategoryCommodity(),this.hideModal()}},showModal:function(t){this.displayCategory=!0},hideModal:function(t){this.displayCategory=!1},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)}}};e.default=u}).call(this,i("a821")["default"])},"5ec9":function(t,e,i){"use strict";i.r(e);var n=i("66f8"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},6422:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},"66f8":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=r(i("66fd")),a=(i("2f62"),r(i("60c5")));function r(t){return t&&t.__esModule?t:{default:t}}new a.default({key:"QL7BZ-ZCJKK-72IJS-A6NA6-HRJ3F-ZYB6J"});var o={data:function(){return{currentNav:0,currentTab:1,currentTopicTab:0,newsInfo:[],attentionInfo:[],articleInfo:[],activityInfo:[],recruitInfo:[],topicInfo:[],answerInfo:[],topicLinks:{},answerLinks:{},menu_list:["关注","活动","动态","招募"],topic_list:["热门话题","热门回答"],scroll_height:700,topic_scroll_height:600,displayLocation:"",imageList:[],attention_height:500,article_height:700,activity_height:700,recruit_height:700,fixTabbar:!1,tabbar_top:n.default.prototype.CustomBar,loadingItem:!1,loading:!0,attention_scroll:1,activity_scroll:1,article_scroll:1,recruit_scroll:1,page_scroll:1,loadingNext:!1,links:[],newsCurrentPage:1,attentionCurrentPage:1,activityCurrentPage:1,articleCurrentPage:1,recruitCurrentPage:1,newsComplete:!1,attentionComplete:!1,activityComplete:!1,articleComplete:!1,recruitComplete:!1,topicLoadOver:!1,answerLoadOver:!1}},computed:{currentScrollHeight:function(){return 1==this.currentTab?this.activity_height:2==this.currentTab?this.article_height:3==this.currentTab?this.recruit_height:this.attention_height}},onShareAppMessage:function(t){return{title:"快来围观微校～～",path:"/pages/index/index",imageUrl:"/static/user/shareImage.jpg"}},mounted:function(){var t=this;setTimeout(function(){t.getHeight()},100),n.default.prototype.$http.request({url:"/information/recommend",method:"POST"}).then(function(e){for(var i in t.newsInfo=e.data.data.news.data,t.newsInfo)for(var n in t.newsInfo[i].news_images)t.imageList.push(t.newsInfo[i].news_images[n].image_url);for(var a in t.attentionInfo=e.data.data.attentions.data,t.attentionInfo){for(var r in t.attentionInfo[a].article_images)t.imageList.push(t.attentionInfo[a].article_images[r].image_url);t.formatAttentionContent(a),t.formatAttentionTime(a)}for(var o in t.articleInfo=e.data.data.articles.data,t.articleInfo){for(var s in t.articleInfo[o].article_images)t.imageList.push(t.articleInfo[o].article_images[s].image_url);t.formatArticleContent(o),t.formatArticleTime(o)}for(var c in t.activityInfo=e.data.data.activities.data,t.activityInfo){for(var u in t.activityInfo[c].activity_images)t.imageList.push(t.activityInfo[c].activity_images[u].image_url);t.formatActivityContent(c),t.formatActivityTime(c)}for(var l in t.recruitInfo=e.data.data.recruits.data,t.recruitInfo){for(var f in t.recruitInfo[l].recruit_images)t.imageList.push(t.recruitInfo[l].recruit_images[f].image_url);t.formatRecruitContent(l),t.formatRecruitTime(l)}t.loading=!1})},methods:{loadNextAnswer:function(){var t=this;this.answerLoadOver||this.loading||(this.loading=!0,n.default.prototype.$http.request({url:this.answerLinks.next,method:"POST"}).then(function(e){t.answerLinks=e.data.links,t.answerInfo.push.apply(t.answerInfo,e.data.data);for(var i=10*(e.data.meta.current_page-1);i<t.answerInfo.length;i++){for(var n in t.answerInfo[i].answer_images)t.imageList.push(t.answerInfo[i].answer_images[n].image_url);t.formatAnswerContent(i)}e.data.meta.current_page==e.data.meta.last_page&&(t.answerLoadOver=!0),t.loading=!1}))},loadNextTopic:function(){var t=this;this.topicLoadOver||this.loading||(this.loading=!0,n.default.prototype.$http.request({url:this.topicLinks.next,method:"POST"}).then(function(e){t.topicLinks=e.data.links,t.topicInfo.push.apply(t.topicInfo,e.data.data);for(var i=10*(e.data.meta.current_page-1);i<t.topicInfo.length;i++){for(var n in t.topicInfo[i].topic_images)t.imageList.push(t.topicInfo[i].topic_images[n].image_url);t.formatTopicContent(i)}e.data.meta.current_page==e.data.meta.last_page&&(t.topicLoadOver=!0),t.loading=!1}))},requestRecomendTopic:function(){var t=this;0==this.topicInfo.length&&(this.loading=!0,n.default.prototype.$http.request({url:"/topics/recommend",method:"POST"}).then(function(e){for(var i in t.topicInfo=e.data.data,t.topicLinks=e.data.links,t.topicInfo){for(var n in t.topicInfo[i].topic_images)t.imageList.push(t.topicInfo[i].topic_images[n].image_url);t.formatTopicContent(i)}t.loading=!1}))},requestRecomendAnswer:function(){var t=this;0==this.answerInfo.length&&(this.loading=!0,n.default.prototype.$http.request({url:"/answers/recommend",method:"POST"}).then(function(e){for(var i in t.answerInfo=e.data.data,t.answerLinks=e.data.links,t.answerInfo){for(var n in t.answerInfo[i].answer_images)t.imageList.push(t.answerInfo[i].answer_images[n].image_url);t.formatAnswerContent(i)}t.loading=!1}))},navigateUserShow:function(e,i){i||t.navigateTo({url:"/pages/user-show/user-show?user_id="+e})},formatTopicContent:function(t){this.topicInfo[t].topic_content=this.topicInfo[t].topic_content.replace(/<br\/\>/g,"\n")},formatAnswerContent:function(t){this.answerInfo[t].answer_content=this.answerInfo[t].answer_content.replace(/<br\/\>/g,"\n")},formatArticleContent:function(t){this.articleInfo[t].article_content=this.articleInfo[t].article_content.replace(/<br\/\>/g,"\n")},formatActivityContent:function(t){this.activityInfo[t].activity_content=this.activityInfo[t].activity_content.replace(/<br\/\>/g,"\n"),this.activityInfo[t].activity_attention&&(this.activityInfo[t].activity_attention=this.activityInfo[t].activity_attention.replace(/<br\/\>/g,"\n"))},formatRecruitContent:function(t){this.recruitInfo[t].recruit_content=this.recruitInfo[t].recruit_content.replace(/<br\/\>/g,"\n")},formatAttentionContent:function(t){this.attentionInfo[t].article_content=this.attentionInfo[t].article_content.replace(/<br\/\>/g,"\n")},loadNextPage:function(){var e=this;if(!this.loadingNext){var i=0;if(1==this.currentNav){if(1==this.currentTab){if(this.activityComplete)return;this.activityCurrentPage++,i=this.activityCurrentPage}else if(2==this.currentTab){if(this.articleComplete)return;this.articleCurrentPage++,i=this.articleCurrentPage}else if(3==this.currentTab){if(this.recruitComplete)return;this.recruitCurrentPage++,i=this.recruitCurrentPage}else{if(this.attentionComplete)return;this.attentionCurrentPage++,i=this.attentionCurrentPage}this.loadingNext=!0,n.default.prototype.$http.request({url:"/information/recommend?page="+i,method:"POST"}).then(function(n){if(1==e.currentTab){if(0==n.data.data.activities.data.length)return e.activityComplete=!0,void(e.loadingNext=!1);e.activityInfo.push.apply(e.activityInfo,n.data.data.activities.data);for(var a=10*(i-1);a<e.activityInfo.length;a++){for(var r in e.activityInfo[a].activity_images)e.imageList.push(e.activityInfo[a].activity_images[r].image_url);e.formatActivityTime(a),e.formatActivityContent(a)}setTimeout(function(){var i=t.createSelectorQuery().in(e);i.select("#activity").boundingClientRect(function(t){e.activity_height=t.height}).exec()},30)}else if(2==e.currentTab){if(0==n.data.data.articles.data.length)return e.articleComplete=!0,void(e.loadingNext=!1);e.articleInfo.push.apply(e.articleInfo,n.data.data.articles.data);for(var o=10*(i-1);o<e.articleInfo.length;o++){for(var s in e.articleInfo[o].article_images)e.imageList.push(e.articleInfo[o].article_images[s].image_url);e.formatArticleTime(o),e.formatArticleContent(o)}setTimeout(function(){var i=t.createSelectorQuery().in(e);i.select("#article").boundingClientRect(function(t){e.article_height=t.height}).exec()},30)}else if(3==e.currentTab){if(0==n.data.data.recruits.data.length)return e.recruitComplete=!0,void(e.loadingNext=!1);e.recruitInfo.push.apply(e.recruitInfo,n.data.data.recruits.data);for(var c=10*(i-1);c<e.recruitInfo.length;c++){for(var u in e.recruitInfo[c].recruit_images)e.imageList.push(e.recruitInfo[c].recruit_images[u].image_url);e.formatRecruitTime(c),e.formatRecruitContent(c)}setTimeout(function(){var i=t.createSelectorQuery().in(e);i.select("#recruit").boundingClientRect(function(t){e.recruit_height=t.height}).exec()},30)}else{if(0==n.data.data.attentions.data.length)return e.attentionComplete=!0,void(e.loadingNext=!1);e.attentionInfo.push.apply(e.attentionInfo,n.data.data.attentions.data);for(var l=10*(i-1);l<e.attentionInfo.length;l++){for(var f in e.attentionInfo[l].article_images)e.imageList.push(e.attentionInfo[l].article_images[f].image_url);e.formatAttentionTime(l),e.formatAttentionContent(l)}setTimeout(function(){var i=t.createSelectorQuery().in(e);i.select("#attention").boundingClientRect(function(t){e.attention_height=t.height}).exec()},30)}e.loadingNext=!1})}else{if(this.newsComplete)return;this.newsCurrentPage++,i=this.newsCurrentPage,this.loadingNext=!0,n.default.prototype.$http.request({url:"/information/recommend?page="+i,method:"POST"}).then(function(t){if(0==t.data.data.news.data.length)return e.newsComplete=!0,void(e.loadingNext=!1);e.newsInfo.push.apply(e.newsInfo,t.data.data.news.data);for(var n=10*(i-1);n<e.newsInfo.length;n++)for(var a in e.newsInfo[n].news_images)e.imageList.push(e.newsInfo[n].news_images[a].image_url);e.loadingNext=!1})}}},pageScroll:function(t){1==this.currentNav&&(t.detail.scrollTop>=50?this.fixTabbar=!0:this.fixTabbar=!1,0==this.currentTab?this.attention_scroll=t.detail.scrollTop:1==this.currentTab?this.activity_scroll=t.detail.scrollTop:2==this.currentTab?this.article_scroll=t.detail.scrollTop:3==this.currentTab&&(this.recruit_scroll=t.detail.scrollTop))},navigateNews:function(e){t.navigateTo({url:"/pages/news/news?news_id="+e})},navigateArticle:function(e,i){t.navigateTo({url:"/pages/article/article?article_id="+e+"&comment="+i})},navigateActivity:function(e,i){t.navigateTo({url:"/pages/activity/activity?activity_id="+e+"&comment="+i})},navigateRecruit:function(e,i){t.navigateTo({url:"/pages/recruit/recruit?recruit_id="+e+"&comment="+i})},navigateTopic:function(e){t.navigateTo({url:"/pages/topic/topic?topic_id="+e})},navigateAnswer:function(e){t.navigateTo({url:"/pages/answer/answer?answer_id="+e})},viewImage:function(e){t.previewImage({urls:this.imageList,current:e.currentTarget.dataset.url})},likeRecruit:function(t,e){var i=this;n.default.prototype.$http.request({url:"/likes/recruit",method:"POST",params:{recruit_id:e}}).then(function(e){i.recruitInfo[t].recruit_like=!i.recruitInfo[t].recruit_like,i.recruitInfo[t].recruit_like?i.recruitInfo[t].recruit_likes++:i.recruitInfo[t].recruit_likes--,i.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},likeActivity:function(t,e){var i=this;n.default.prototype.$http.request({url:"/likes/activity",method:"POST",params:{activity_id:e}}).then(function(e){i.activityInfo[t].activity_like=!i.activityInfo[t].activity_like,i.activityInfo[t].activity_like?i.activityInfo[t].activity_likes++:i.activityInfo[t].activity_likes--,i.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},likeArticle:function(t,e){var i=this;n.default.prototype.$http.request({url:"/likes/article",method:"POST",params:{article_id:e}}).then(function(e){i.articleInfo[t].article_like=!i.articleInfo[t].article_like,i.articleInfo[t].article_like?i.articleInfo[t].article_likes++:i.articleInfo[t].article_likes--,i.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},likeAttention:function(t,e){var i=this;n.default.prototype.$http.request({url:"/likes/article",method:"POST",params:{article_id:e}}).then(function(e){i.attentionInfo[t].article_like=!i.attentionInfo[t].article_like,i.attentionInfo[t].article_like?i.attentionInfo[t].article_likes++:i.attentionInfo[t].article_likes--,i.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},getHeight:function(){var e=this;t.getSystemInfo({success:function(i){e.screen_height=i.windowHeight,e.screen_width=i.windowWidth;var n=t.createSelectorQuery().in(e);n.select("#information").boundingClientRect(function(t){e.scroll_height=e.screen_height-t.top}).exec()}})},getTopicHeight:function(){var e=this;t.getSystemInfo({success:function(i){e.screen_height=i.windowHeight,e.screen_width=i.windowWidth;var n=t.createSelectorQuery().in(e);n.select("#topicSwiper").boundingClientRect(function(t){e.topic_scroll_height=e.screen_height-t.top-25}).exec()}})},navSelect:function(e){var i=this;this.currentNav=e,1==this.currentNav?setTimeout(function(){var e=t.createSelectorQuery().in(i);e.select("#article").boundingClientRect(function(t){i.article_height=t.height}).exec(),e.select("#activity").boundingClientRect(function(t){i.activity_height=t.height}).exec(),e.select("#recruit").boundingClientRect(function(t){i.recruit_height=t.height}).exec(),e.select("#attention").boundingClientRect(function(t){t&&(i.attention_height=t.height)}).exec()},300):2==this.currentNav&&(this.requestRecomendTopic(),setTimeout(function(){i.getTopicHeight()},200),this.requestRecomendAnswer())},topicTabSelect:function(t){this.currentTopicTab=t.currentTarget.dataset.id,this.getTopicHeight()},topicTabSwiper:function(t){this.currentTopicTab=t.detail.current,this.getTopicHeight()},tabSelect:function(t){this.currentTab=t.currentTarget.dataset.id,this.randomScrollHeight(),this.setScrollHeight()},tabSwiper:function(t){this.currentTab=t.detail.current,this.randomScrollHeight(),this.setScrollHeight()},randomScrollHeight:function(){Boolean(Math.round(Math.random()))?0==this.currentTab?this.attention_scroll+=1:1==this.currentTab?this.activity_scroll+=1:2==this.currentTab?this.article_scroll+=1:3==this.currentTab&&(this.recruit_scroll+=1):0==this.currentTab?this.attention_scroll-=1:1==this.currentTab?this.activity_scroll-=1:2==this.currentTab?this.article_scroll-=1:3==this.currentTab&&(this.recruit_scroll-=1)},setScrollHeight:function(){var t=this;this.loadingItem=!0,0==this.currentTab?this.page_scroll=this.attention_scroll:1==this.currentTab?this.page_scroll=this.activity_scroll:2==this.currentTab?this.page_scroll=this.article_scroll:3==this.currentTab&&(this.page_scroll=this.recruit_scroll),setTimeout(function(){t.loadingItem=!1},400)},formatAttentionTime:function(t){var e=this.attentionInfo[t].article_created.split(" "),i=(new Date).toLocaleDateString(),n=Math.abs(Math.ceil((new Date(i)-new Date(e[0]))/864e5)),a=7-n;if(0===n)this.attentionInfo[t].display_time="今天 "+e[1];else if(1===n)this.attentionInfo[t].display_time="昨天 "+e[1];else if(2===n)this.attentionInfo[t].display_time="前天 "+e[1];else if(a>0){var r=new Date(this.attentionInfo[t].article_created).getDay();switch(r){case 0:this.attentionInfo[t].display_time="星期天 "+e[1];break;case 1:this.attentionInfo[t].display_time="星期一 "+e[1];break;case 2:this.attentionInfo[t].display_time="星期二 "+e[1];break;case 3:this.attentionInfo[t].display_time="星期三 "+e[1];break;case 4:this.attentionInfo[t].display_time="星期四 "+e[1];break;case 5:this.attentionInfo[t].display_time="星期五 "+e[1];break;case 6:this.attentionInfo[t].display_time="星期六 "+e[1];break}}else this.attentionInfo[t].display_time=this.attentionInfo[t].article_created},formatArticleTime:function(t){var e=this.articleInfo[t].article_created.split(" "),i=(new Date).toLocaleDateString(),n=Math.abs(Math.ceil((new Date(i)-new Date(e[0]))/864e5)),a=7-n;if(0===n)this.articleInfo[t].display_time="今天 "+e[1];else if(1===n)this.articleInfo[t].display_time="昨天 "+e[1];else if(2===n)this.articleInfo[t].display_time="前天 "+e[1];else if(a>0){var r=new Date(this.articleInfo[t].article_created).getDay();switch(r){case 0:this.articleInfo[t].display_time="星期天 "+e[1];break;case 1:this.articleInfo[t].display_time="星期一 "+e[1];break;case 2:this.articleInfo[t].display_time="星期二 "+e[1];break;case 3:this.articleInfo[t].display_time="星期三 "+e[1];break;case 4:this.articleInfo[t].display_time="星期四 "+e[1];break;case 5:this.articleInfo[t].display_time="星期五 "+e[1];break;case 6:this.articleInfo[t].display_time="星期六 "+e[1];break}}else this.articleInfo[t].display_time=this.articleInfo[t].article_created},formatActivityTime:function(t){var e=this.activityInfo[t].activity_created.split(" "),i=(new Date).toLocaleDateString(),n=Math.abs(Math.ceil((new Date(i)-new Date(e[0]))/864e5)),a=7-n;if(0===n)this.activityInfo[t].display_time="今天 "+e[1];else if(1===n)this.activityInfo[t].display_time="昨天 "+e[1];else if(2===n)this.activityInfo[t].display_time="前天 "+e[1];else if(a>0){var r=new Date(this.activityInfo[t].activity_created).getDay();switch(r){case 0:this.activityInfo[t].display_time="星期天 "+e[1];break;case 1:this.activityInfo[t].display_time="星期一 "+e[1];break;case 2:this.activityInfo[t].display_time="星期二 "+e[1];break;case 3:this.activityInfo[t].display_time="星期三 "+e[1];break;case 4:this.activityInfo[t].display_time="星期四 "+e[1];break;case 5:this.activityInfo[t].display_time="星期五 "+e[1];break;case 6:this.activityInfo[t].display_time="星期六 "+e[1];break}}else this.activityInfo[t].display_time=this.activityInfo[t].activity_created},formatRecruitTime:function(t){var e=this.recruitInfo[t].recruit_created.split(" "),i=(new Date).toLocaleDateString(),n=Math.abs(Math.ceil((new Date(i)-new Date(e[0]))/864e5)),a=7-n;if(0===n)this.recruitInfo[t].display_time="今天 "+e[1];else if(1===n)this.recruitInfo[t].display_time="昨天 "+e[1];else if(2===n)this.recruitInfo[t].display_time="前天 "+e[1];else if(a>0){var r=new Date(this.recruitInfo[t].recruit_created).getDay();switch(r){case 0:this.recruitInfo[t].display_time="星期天 "+e[1];break;case 1:this.recruitInfo[t].display_time="星期一 "+e[1];break;case 2:this.recruitInfo[t].display_time="星期二 "+e[1];break;case 3:this.recruitInfo[t].display_time="星期三 "+e[1];break;case 4:this.recruitInfo[t].display_time="星期四 "+e[1];break;case 5:this.recruitInfo[t].display_time="星期五 "+e[1];break;case 6:this.recruitInfo[t].display_time="星期六 "+e[1];break}}else this.recruitInfo[t].display_time=this.recruitInfo[t].recruit_created}}};e.default=o}).call(this,i("a821")["default"])},6703:function(t,e,i){"use strict";i.r(e);var n=i("f90e"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},"7cc2":function(t,e,i){"use strict";i.r(e);var n=i("4709"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},"8e3e":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},a=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return a})},9803:function(t,e,i){"use strict";i.r(e);var n=i("0e8c"),a=i("f261");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i("a691");var o=i("2877"),s=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports},c132:function(t,e,i){},c1e6:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i("2f62");function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){r(t,e,i[e])})}return t}function r(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o={data:function(){return{TabCur:0,menu_list:["美食","娱乐","住宿","运动"],food_list:[],play_list:[],live_list:[],sport_list:[],search_list:[],scroll_left:0,scroll_height:600,screen_height:800,screen_width:400,search_keywords:"",foodCurrentPage:1,playCurrentPage:1,liveCurrentPage:1,sportCurrentPage:1,searchCurrentPage:1,loading:!0}},computed:a({},(0,n.mapState)({location:function(t){return t.UserLocation},map_poi:function(t){return t.MapPoi}}),{userLocation:function(){return null==this.location.user_address?"获取定位...":this.location.user_address_component.district+this.location.user_address_component.street},display_location:function(){return null!=this.location.user_address}}),watch:{"$store.state.MapPoi.search_keyword":function(){var t=this;""!=this.map_poi.search_keyword&&(this.TabCur=4,this.scroll_left=this.screen_width/4*3,this.$store.dispatch("getAroundPoi",{latitude:this.location.user_location.latitude,longitude:this.location.user_location.longitude,keywords:this.map_poi.search_keyword,page:1,extensions:"base",sortrule:"weight"}).then(function(e){t.search_list=t.formatPoi(e.data.pois),t.loading=!1}))}},mounted:function(){var t=this;this.initPoi(),setTimeout(function(){t.getHeight()},100)},destroyed:function(){this.$store.dispatch("initSearchKeyword")},methods:{afterOpenSetting:function(t){var e=this;t.detail.authSetting["scope.userLocation"]&&this.$store.dispatch("requestUserLocation").then(function(t){e.loading=!0,setTimeout(function(){0==e.location.user_location.latitude?setTimeout(function(){e.initPoi(),e.getHeight()},500):(e.initPoi(),e.getHeight())},500)})},loadNextPage:function(t){var e=this;if(!this.loading){this.currentPage++,this.loading=!0;var i="",n=0;switch(t){case"food":i="美食",this.foodCurrentPage++,n=this.foodCurrentPage;break;case"play":i="娱乐",this.playCurrentPage++,n=this.playCurrentPage;break;case"live":i="住宿",this.liveCurrentPage++,n=this.liveCurrentPage;break;case"sport":i="运动场馆",this.sportCurrentPage++,n=this.sportCurrentPage;break;case"search":i=this.map_poi.search_keyword,this.searchCurrentPage++,n=this.searchCurrentPage;break}this.$store.dispatch("getAroundPoi",{latitude:this.location.user_location.latitude,longitude:this.location.user_location.longitude,keywords:i,page:n,radius:6e3,extensions:"base",sortrule:"weight"}).then(function(i){switch(t){case"food":e.food_list.push.apply(e.food_list,e.formatPoi(i.data.pois));break;case"play":e.play_list.push.apply(e.play_list,e.formatPoi(i.data.pois));break;case"live":e.live_list.push.apply(e.live_list,e.formatPoi(i.data.pois));break;case"sport":e.sport_list.push.apply(e.sport_list,e.formatPoi(i.data.pois));break;case"search":e.search_list.push.apply(e.search_list,e.formatPoi(i.data.pois));break}e.loading=!1})}},getHeight:function(){var e=this;t.getSystemInfo({success:function(i){e.screen_height=i.windowHeight,e.screen_width=i.windowWidth;var n=t.createSelectorQuery().in(e);n.select("#swiper").boundingClientRect(function(t){e.scroll_height=e.screen_height-t.top}).exec()}})},initPoi:function(){var t=this;this.$store.dispatch("getAroundPoi",{latitude:this.location.user_location.latitude,longitude:this.location.user_location.longitude,keywords:"美食",page:1,radius:6e3,extensions:"base",sortrule:"weight"}).then(function(e){t.food_list=t.formatPoi(e.data.pois),t.loading=!1}),this.$store.dispatch("getAroundPoi",{latitude:this.location.user_location.latitude,longitude:this.location.user_location.longitude,keywords:"娱乐",page:1,radius:6e3,extensions:"base",sortrule:"weight"}).then(function(e){t.play_list=t.formatPoi(e.data.pois),t.loading=!1}),this.$store.dispatch("getAroundPoi",{latitude:this.location.user_location.latitude,longitude:this.location.user_location.longitude,keywords:"住宿",page:1,radius:6e3,extensions:"base",sortrule:"weight"}).then(function(e){t.live_list=t.formatPoi(e.data.pois),t.loading=!1}),this.$store.dispatch("getAroundPoi",{latitude:this.location.user_location.latitude,longitude:this.location.user_location.longitude,keywords:"运动场馆",page:1,radius:6e3,extensions:"base",sortrule:"weight"}).then(function(e){t.sport_list=t.formatPoi(e.data.pois),t.loading=!1})},formatPoi:function(t){for(var e in t){if(""!=t[e].tel){var i=t[e].tel.split(";");t[e].tel=i[0]}t[e].distance/1e3<1?t[e].distance=t[e].distance+"m":t[e].distance=(t[e].distance/1e3).toFixed(1)+"km"}return t},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scroll_left=(t.currentTarget.dataset.id-1)*(this.screen_width/4)},tabSwiper:function(t){this.TabCur=t.detail.current,this.scroll_left=(this.TabCur-1)*(this.screen_width/4)},navigateLocation:function(){t.navigateTo({url:"/pages/location/location"})},navigateSearch:function(){t.navigateTo({url:"/pages/search/search"})}}};e.default=o}).call(this,i("a821")["default"])},c2ff:function(t,e,i){"use strict";i.r(e);var n=i("4044"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},d240:function(t,e,i){"use strict";i.r(e);var n=i("8e3e"),a=i("5ec9");for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);i("939f");var o=i("2877"),s=Object(o["a"])(a["default"],n["a"],n["b"],!1,null,"14b9bfd0",null);e["default"]=s.exports},d3e8:function(t,e,i){"use strict";(function(t){i("499b"),i("921b");var e=f(i("66fd")),n=f(i("2379")),a=f(i("898b")),r=f(i("018f")),o=f(i("2e30")),s=f(i("d240")),c=f(i("3c8a")),u=f(i("9803")),l=f(i("127c"));function f(t){return t&&t.__esModule?t:{default:t}}function h(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){d(t,e,i[e])})}return t}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}e.default.prototype.$http=(0,a.default)(),e.default.prototype.$store=r.default;var g=function(){return i.e("colorui/components/cu-custom").then(i.bind(null,"5f28"))};e.default.component("cu-custom",g);var p=function(){return Promise.all([i.e("common/vendor"),i.e("components/tabbar/tabbar")]).then(i.bind(null,"4c17"))};e.default.component("tabbar",p),e.default.component("addition",o.default),e.default.component("information",s.default),e.default.component("store",c.default),e.default.component("discovery",u.default);var m=function(){return Promise.all([i.e("common/vendor"),i.e("pages/user/user")]).then(i.bind(null,"a172"))};e.default.component("user",m);var y=function(){return i.e("pages/authorization/authorization").then(i.bind(null,"601e"))};e.default.component("authorization",y),e.default.component("search",l.default);var _=function(){return i.e("components/loading/loading").then(i.bind(null,"f6b2"))};e.default.component("loading",_);var v=function(){return i.e("components/notification/notification").then(i.bind(null,"1873"))};e.default.component("notification",v),e.default.config.productionTip=!1,n.default.mpType="app";var b=new e.default(h({},n.default));t(b).$mount()}).call(this,i("a821")["createApp"])},da07:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;a(i("66fd"));var n=i("2f62");function a(t){return t&&t.__esModule?t:{default:t}}function r(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){o(t,e,i[e])})}return t}function o(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var s={data:function(){return{selectIndex:0,swiper_height:650,showToast:!1,toastContent:"",loading:!1}},computed:r({},(0,n.mapState)({user:function(t){return t.AuthUser}})),mounted:function(){var t=this;this.getHeight(),this.loading=!0,setTimeout(function(){t.loading=!1},300)},methods:{getHeight:function(){var e=this;t.getSystemInfo({success:function(i){e.screen_height=i.windowHeight,e.screen_width=i.windowWidth;var n=t.createSelectorQuery().in(e);n.select("#swiper").boundingClientRect(function(t){e.swiper_height=e.screen_height-t.top-80}).exec()}})},hideModal:function(t){this.showToast=!1},buttonSelect:function(e){if(this.selectIndex=e.currentTarget.dataset.id,""==this.user.authentication||null==this.user.authentication)return this.toastContent="先去认证身份，再进行发布操作～～",void(this.showToast=!0);switch(this.selectIndex){case 0:t.navigateTo({url:"/pages/addition-article/addition-article"});break;case 1:if(""==this.user.user_organization||null==this.user.user_organization||void 0==this.user.user_organization)return this.toastContent="只有学生组织才能发布活动，快去认证吧～～",void(this.showToast=!0);t.navigateTo({url:"/pages/addition-activity/addition-activity"});break;case 2:t.navigateTo({url:"/pages/addition-topic/addition-topic"});break;case 3:t.navigateTo({url:"/pages/addition-recruit/addition-recruit"});break;case 4:t.navigateTo({url:"/pages/addition-commodity/addition-commodity"});break}}}};e.default=s}).call(this,i("a821")["default"])},e04d:function(t,e,i){"use strict";i.r(e);var n=i("da07"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},f261:function(t,e,i){"use strict";i.r(e);var n=i("c1e6"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);e["default"]=a.a},f90e:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("60c5")),a=i("c36d"),r=i("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){c(t,e,i[e])})}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var u=new n.default({key:"XSWBZ-MHZ3K-U76JO-AU4NT-WKNYK-B2BA4"}),l={data:function(){return{StatusBar:this.StatusBar,CustomBar:this.CustomBar,searchText:"",historyList:t.getStorageSync("search_cache"),wantList:["美食","住宿","运动","娱乐","KTV","商场","公园","电影","景点"],inputTimeStamp:0,inputTips:[]}},watch:{},computed:s({},(0,r.mapState)({location:function(t){return t.UserLocation}}),{style:function(){var t=this.StatusBar,e=this.CustomBar,i=this.bgImage,n="height:".concat(e,"px;padding-top:").concat(t,"px;");return this.bgImage&&(n="".concat(n,"background-image:url(").concat(i,");")),n}}),onShareAppMessage:function(t){return{title:"快来围观微校～～",path:"/pages/index/index",imageUrl:"/static/user/shareImage.jpg"}},mounted:function(){},methods:{quickSearch:function(e){this.$store.dispatch("setSearchKeyword",e),t.navigateBack({delta:1})},searchTips:function(t){var e=this;this.inputTimeStamp=t.timeStamp,setTimeout(function(){e.inputTimeStamp==t.timeStamp&&e.requestTips()},600)},requestTips:function(){var t=this;this.inputTips=[],u.getSuggestion({keyword:this.searchText,region:this.location.user_address_component.city,success:function(e){for(var i=0;i<e.data.length;i++)t.inputTips.push({title:e.data[i].title,id:e.data[i].id,addr:e.data[i].address,city:e.data[i].city,district:e.data[i].district,latitude:e.data[i].location.lat,longitude:e.data[i].location.lng})}})},searchStart:function(){if(""==this.searchText)return t.showToast({title:"请输入关键字",icon:"none",duration:1e3}),!1;this.setSerachStorage(),this.setSearch()},clearHistory:function(){this.historyList=[],t.setStorage({key:"search_cache",data:[]})},setSerachStorage:function(){var e=this;t.getStorage({key:"search_cache",success:function(i){var n=i.data;if(console.log(n),n.length>9){var a=!0,r=!1,o=void 0;try{for(var s,c=n[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var u=s.value;if(u==e.searchText)return!1}}catch(m){r=!0,o=m}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}n.pop(),n.unshift(e.searchText)}else{var l=!0,f=!1,h=void 0;try{for(var d,g=n[Symbol.iterator]();!(l=(d=g.next()).done);l=!0){var p=d.value;if(p==e.searchText)return!1}}catch(m){f=!0,h=m}finally{try{l||null==g.return||g.return()}finally{if(f)throw h}}n.unshift(e.searchText)}e.historyList=n,t.setStorage({key:"search_cache",data:e.historyList})},fail:function(){e.historyList=[],e.historyList.push(e.searchText),t.setStorage({key:"search_cache",data:e.historyList})}})},highLight:function(t,e){return(0,a.highLightMsg)(t,e)},setSearch:function(){""!=this.searchText&&this.$store.dispatch("setSearchCommodity",this.searchText),this.BackPage()},BackPage:function(){t.navigateBack({delta:1})}}};e.default=l}).call(this,i("a821")["default"])}},[["d3e8","common/runtime","common/vendor"]]]);