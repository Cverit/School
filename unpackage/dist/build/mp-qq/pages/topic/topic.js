(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/topic/topic"],{"6c6d":function(t,e,i){"use strict";i.r(e);var n=i("a79f"),o=i.n(n);for(var a in n)"default"!==a&&function(t){i.d(e,t,function(){return n[t]})}(a);e["default"]=o.a},7815:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement;t._self._c},o=[];i.d(e,"a",function(){return n}),i.d(e,"b",function(){return o})},"98ff":function(t,e,i){"use strict";(function(t){i("499b"),i("921b");n(i("66fd"));var e=n(i("ddb5"));function n(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("a821")["createPage"])},a79f:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=o(i("66fd"));i("2f62");function o(t){return t&&t.__esModule?t:{default:t}}var a={data:function(){return{topic_id:0,topicInfo:[],answerInfo:[],links:{},loading:!1,display:!0,scroll_height:700,imageList:[],loadOver:!1}},onShareAppMessage:function(t){return{title:"快来围观这个话题",path:"/pages/topic/topic?topic_id="+this.topic_id,imageUrl:"/static/user/shareImage.jpg"}},onLoad:function(t){var e=this;this.topic_id=t.topic_id;this.loading=!0,n.default.prototype.$http.request({url:"/topics/detail",method:"POST",params:{topic_id:this.topic_id}}).then(function(t){e.topicInfo=t.data.data,e.loading=!1}),n.default.prototype.$http.request({url:"/answers/topic",method:"POST",params:{topic_id:this.topic_id}}).then(function(t){for(var i in e.answerInfo=t.data.data,e.links=t.data.links,e.answerInfo){for(var n in e.answerInfo[i].answer_images)e.imageList.push(e.answerInfo[i].answer_images[n].image_url);e.formatAnswerContent(i)}e.loading=!1,0==e.answerInfo.length&&(e.loadOver=!0)})},mounted:function(){this.getHeight()},methods:{loadNextPage:function(){var t=this;this.loadOver||this.loading||(this.loading=!0,n.default.prototype.$http.request({url:this.links.next,method:"POST",params:{topic_id:this.topic_id}}).then(function(e){t.links=e.data.links,t.answerInfo.push.apply(t.answerInfo,e.data.data);for(var i=10*(e.data.meta.current_page-1);i<t.answerInfo.length;i++){for(var n in t.answerInfo[i].answer_images)t.imageList.push(t.answerInfo[i].answer_images[n].image_url);t.formatAnswerContent(i)}e.data.meta.current_page==e.data.meta.last_page&&(t.loadOver=!0),t.loading=!1}))},viewImage:function(e){t.previewImage({urls:this.imageList,current:e.currentTarget.dataset.url})},likeTopic:function(t,e){var i=this;n.default.prototype.$http.request({url:"/likes/topic",method:"POST",params:{topic_id:this.topic_id}}).then(function(t){i.topicInfo.topic_like=!i.topicInfo.topic_like,i.topicInfo.topic_like?i.topicInfo.topic_likes++:i.topicInfo.topic_likes--,i.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},CollectTopic:function(t,e){var i=this;n.default.prototype.$http.request({url:"/collections/topic",method:"POST",params:{topic_id:this.topic_id}}).then(function(t){i.topicInfo.topic_collect=!i.topicInfo.topic_collect,i.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},tooglrUserFollow:function(){var t=this;n.default.prototype.$http.request({url:"/users/follow",method:"POST",params:{accept_id:this.topicInfo.topic_user.user_id}}).then(function(e){t.topicInfo.user_follow=!t.topicInfo.user_follow,t.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},formatTopicContent:function(t){this.topicInfo.topic_content=this.topicInfo.topic_content.replace(/<br\/\>/g,"\n")},formatAnswerContent:function(t){this.answerInfo[t].answer_content=this.answerInfo[t].answer_content.replace(/<br\/\>/g,"\n")},navigateUserShow:function(e,i){i||t.navigateTo({url:"/pages/user-show/user-show?user_id="+e})},getHeight:function(){var e=this;t.getSystemInfo({success:function(i){e.screen_height=i.windowHeight,e.screen_width=i.windowWidth;var n=t.createSelectorQuery().in(e);n.select("#scroll").boundingClientRect(function(t){e.scroll_height=e.screen_height-t.top-50}).exec()}})},navigateAddAnswer:function(){t.navigateTo({url:"/pages/addition-answer/addition-answer?topic_id="+this.topic_id})}}};e.default=a}).call(this,i("a821")["default"])},ddb5:function(t,e,i){"use strict";i.r(e);var n=i("7815"),o=i("6c6d");for(var a in o)"default"!==a&&function(t){i.d(e,t,function(){return o[t]})}(a);i("e529");var r=i("2877"),s=Object(r["a"])(o["default"],n["a"],n["b"],!1,null,null,null);e["default"]=s.exports}},[["98ff","common/runtime","common/vendor"]]]);