(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/information/information"],{"5ec9":function(t,e,i){"use strict";i.r(e);var a=i("66f8"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,function(){return a[t]})}(r);e["default"]=n.a},"66f8":function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=r(i("66fd")),n=(i("2f62"),r(i("60c5")));function r(t){return t&&t.__esModule?t:{default:t}}new n.default({key:"QL7BZ-ZCJKK-72IJS-A6NA6-HRJ3F-ZYB6J"});var o={data:function(){return{currentNav:0,currentTab:1,currentTopicTab:0,newsInfo:[],attentionInfo:[],articleInfo:[],activityInfo:[],recruitInfo:[],topicInfo:[],answerInfo:[],topicLinks:{},answerLinks:{},menu_list:["关注","活动","动态","招募"],topic_list:["热门话题","热门回答"],scroll_height:700,topic_scroll_height:600,displayLocation:"",imageList:[],attention_height:500,article_height:700,activity_height:700,recruit_height:700,fixTabbar:!1,tabbar_top:a.default.prototype.CustomBar,loadingItem:!1,loading:!0,attention_scroll:1,activity_scroll:1,article_scroll:1,recruit_scroll:1,page_scroll:1,loadingNext:!1,links:[],newsCurrentPage:1,attentionCurrentPage:1,activityCurrentPage:1,articleCurrentPage:1,recruitCurrentPage:1,newsComplete:!1,attentionComplete:!1,activityComplete:!1,articleComplete:!1,recruitComplete:!1,topicLoadOver:!1,answerLoadOver:!1}},computed:{currentScrollHeight:function(){return 1==this.currentTab?this.activity_height:2==this.currentTab?this.article_height:3==this.currentTab?this.recruit_height:this.attention_height}},onShareAppMessage:function(t){return{title:"快来围观微校～～",path:"/pages/index/index",imageUrl:"/static/user/shareImage.jpg"}},mounted:function(){var t=this;setTimeout(function(){t.getHeight()},100),a.default.prototype.$http.request({url:"/information/recommend",method:"POST"}).then(function(e){for(var i in t.newsInfo=e.data.data.news.data,t.newsInfo)for(var a in t.newsInfo[i].news_images)t.imageList.push(t.newsInfo[i].news_images[a].image_url);for(var n in t.attentionInfo=e.data.data.attentions.data,t.attentionInfo){for(var r in t.attentionInfo[n].article_images)t.imageList.push(t.attentionInfo[n].article_images[r].image_url);t.formatAttentionContent(n),t.formatAttentionTime(n)}for(var o in t.articleInfo=e.data.data.articles.data,t.articleInfo){for(var c in t.articleInfo[o].article_images)t.imageList.push(t.articleInfo[o].article_images[c].image_url);t.formatArticleContent(o),t.formatArticleTime(o)}for(var s in t.activityInfo=e.data.data.activities.data,t.activityInfo){for(var l in t.activityInfo[s].activity_images)t.imageList.push(t.activityInfo[s].activity_images[l].image_url);t.formatActivityContent(s),t.formatActivityTime(s)}for(var u in t.recruitInfo=e.data.data.recruits.data,t.recruitInfo){for(var f in t.recruitInfo[u].recruit_images)t.imageList.push(t.recruitInfo[u].recruit_images[f].image_url);t.formatRecruitContent(u),t.formatRecruitTime(u)}t.loading=!1})},methods:{loadNextAnswer:function(){var t=this;this.answerLoadOver||this.loading||(this.loading=!0,a.default.prototype.$http.request({url:this.answerLinks.next,method:"POST"}).then(function(e){t.answerLinks=e.data.links,t.answerInfo.push.apply(t.answerInfo,e.data.data);for(var i=10*(e.data.meta.current_page-1);i<t.answerInfo.length;i++){for(var a in t.answerInfo[i].answer_images)t.imageList.push(t.answerInfo[i].answer_images[a].image_url);t.formatAnswerContent(i)}e.data.meta.current_page==e.data.meta.last_page&&(t.answerLoadOver=!0),t.loading=!1}))},loadNextTopic:function(){var t=this;this.topicLoadOver||this.loading||(this.loading=!0,a.default.prototype.$http.request({url:this.topicLinks.next,method:"POST"}).then(function(e){t.topicLinks=e.data.links,t.topicInfo.push.apply(t.topicInfo,e.data.data);for(var i=10*(e.data.meta.current_page-1);i<t.topicInfo.length;i++){for(var a in t.topicInfo[i].topic_images)t.imageList.push(t.topicInfo[i].topic_images[a].image_url);t.formatTopicContent(i)}e.data.meta.current_page==e.data.meta.last_page&&(t.topicLoadOver=!0),t.loading=!1}))},requestRecomendTopic:function(){var t=this;0==this.topicInfo.length&&(this.loading=!0,a.default.prototype.$http.request({url:"/topics/recommend",method:"POST"}).then(function(e){for(var i in t.topicInfo=e.data.data,t.topicLinks=e.data.links,t.topicInfo){for(var a in t.topicInfo[i].topic_images)t.imageList.push(t.topicInfo[i].topic_images[a].image_url);t.formatTopicContent(i)}t.loading=!1}))},requestRecomendAnswer:function(){var t=this;0==this.answerInfo.length&&(this.loading=!0,a.default.prototype.$http.request({url:"/answers/recommend",method:"POST"}).then(function(e){for(var i in t.answerInfo=e.data.data,t.answerLinks=e.data.links,t.answerInfo){for(var a in t.answerInfo[i].answer_images)t.imageList.push(t.answerInfo[i].answer_images[a].image_url);t.formatAnswerContent(i)}t.loading=!1}))},navigateUserShow:function(e,i){i||t.navigateTo({url:"/pages/user-show/user-show?user_id="+e})},formatTopicContent:function(t){this.topicInfo[t].topic_content=this.topicInfo[t].topic_content.replace(/<br\/\>/g,"\n")},formatAnswerContent:function(t){this.answerInfo[t].answer_content=this.answerInfo[t].answer_content.replace(/<br\/\>/g,"\n")},formatArticleContent:function(t){this.articleInfo[t].article_content=this.articleInfo[t].article_content.replace(/<br\/\>/g,"\n")},formatActivityContent:function(t){this.activityInfo[t].activity_content=this.activityInfo[t].activity_content.replace(/<br\/\>/g,"\n"),this.activityInfo[t].activity_attention&&(this.activityInfo[t].activity_attention=this.activityInfo[t].activity_attention.replace(/<br\/\>/g,"\n"))},formatRecruitContent:function(t){this.recruitInfo[t].recruit_content=this.recruitInfo[t].recruit_content.replace(/<br\/\>/g,"\n")},formatAttentionContent:function(t){this.attentionInfo[t].article_content=this.attentionInfo[t].article_content.replace(/<br\/\>/g,"\n")},loadNextPage:function(){var e=this;if(!this.loadingNext){var i=0;if(1==this.currentNav){if(1==this.currentTab){if(this.activityComplete)return;this.activityCurrentPage++,i=this.activityCurrentPage}else if(2==this.currentTab){if(this.articleComplete)return;this.articleCurrentPage++,i=this.articleCurrentPage}else if(3==this.currentTab){if(this.recruitComplete)return;this.recruitCurrentPage++,i=this.recruitCurrentPage}else{if(this.attentionComplete)return;this.attentionCurrentPage++,i=this.attentionCurrentPage}this.loadingNext=!0,a.default.prototype.$http.request({url:"/information/recommend?page="+i,method:"POST"}).then(function(a){if(1==e.currentTab){if(0==a.data.data.activities.data.length)return e.activityComplete=!0,void(e.loadingNext=!1);e.activityInfo.push.apply(e.activityInfo,a.data.data.activities.data);for(var n=10*(i-1);n<e.activityInfo.length;n++){for(var r in e.activityInfo[n].activity_images)e.imageList.push(e.activityInfo[n].activity_images[r].image_url);e.formatActivityTime(n),e.formatActivityContent(n)}setTimeout(function(){var i=t.createSelectorQuery().in(e);i.select("#activity").boundingClientRect(function(t){e.activity_height=t.height}).exec()},30)}else if(2==e.currentTab){if(0==a.data.data.articles.data.length)return e.articleComplete=!0,void(e.loadingNext=!1);e.articleInfo.push.apply(e.articleInfo,a.data.data.articles.data);for(var o=10*(i-1);o<e.articleInfo.length;o++){for(var c in e.articleInfo[o].article_images)e.imageList.push(e.articleInfo[o].article_images[c].image_url);e.formatArticleTime(o),e.formatArticleContent(o)}setTimeout(function(){var i=t.createSelectorQuery().in(e);i.select("#article").boundingClientRect(function(t){e.article_height=t.height}).exec()},30)}else if(3==e.currentTab){if(0==a.data.data.recruits.data.length)return e.recruitComplete=!0,void(e.loadingNext=!1);e.recruitInfo.push.apply(e.recruitInfo,a.data.data.recruits.data);for(var s=10*(i-1);s<e.recruitInfo.length;s++){for(var l in e.recruitInfo[s].recruit_images)e.imageList.push(e.recruitInfo[s].recruit_images[l].image_url);e.formatRecruitTime(s),e.formatRecruitContent(s)}setTimeout(function(){var i=t.createSelectorQuery().in(e);i.select("#recruit").boundingClientRect(function(t){e.recruit_height=t.height}).exec()},30)}else{if(0==a.data.data.attentions.data.length)return e.attentionComplete=!0,void(e.loadingNext=!1);e.attentionInfo.push.apply(e.attentionInfo,a.data.data.attentions.data);for(var u=10*(i-1);u<e.attentionInfo.length;u++){for(var f in e.attentionInfo[u].article_images)e.imageList.push(e.attentionInfo[u].article_images[f].image_url);e.formatAttentionTime(u),e.formatAttentionContent(u)}setTimeout(function(){var i=t.createSelectorQuery().in(e);i.select("#attention").boundingClientRect(function(t){e.attention_height=t.height}).exec()},30)}e.loadingNext=!1})}else{if(this.newsComplete)return;this.newsCurrentPage++,i=this.newsCurrentPage,this.loadingNext=!0,a.default.prototype.$http.request({url:"/information/recommend?page="+i,method:"POST"}).then(function(t){if(0==t.data.data.news.data.length)return e.newsComplete=!0,void(e.loadingNext=!1);e.newsInfo.push.apply(e.newsInfo,t.data.data.news.data);for(var a=10*(i-1);a<e.newsInfo.length;a++)for(var n in e.newsInfo[a].news_images)e.imageList.push(e.newsInfo[a].news_images[n].image_url);e.loadingNext=!1})}}},pageScroll:function(t){1==this.currentNav&&(t.detail.scrollTop>=50?this.fixTabbar=!0:this.fixTabbar=!1,0==this.currentTab?this.attention_scroll=t.detail.scrollTop:1==this.currentTab?this.activity_scroll=t.detail.scrollTop:2==this.currentTab?this.article_scroll=t.detail.scrollTop:3==this.currentTab&&(this.recruit_scroll=t.detail.scrollTop))},navigateNews:function(e){t.navigateTo({url:"/pages/news/news?news_id="+e})},navigateArticle:function(e,i){t.navigateTo({url:"/pages/article/article?article_id="+e+"&comment="+i})},navigateActivity:function(e,i){t.navigateTo({url:"/pages/activity/activity?activity_id="+e+"&comment="+i})},navigateRecruit:function(e,i){t.navigateTo({url:"/pages/recruit/recruit?recruit_id="+e+"&comment="+i})},navigateTopic:function(e){t.navigateTo({url:"/pages/topic/topic?topic_id="+e})},navigateAnswer:function(e){t.navigateTo({url:"/pages/answer/answer?answer_id="+e})},viewImage:function(e){t.previewImage({urls:this.imageList,current:e.currentTarget.dataset.url})},likeRecruit:function(t,e){var i=this;a.default.prototype.$http.request({url:"/likes/recruit",method:"POST",params:{recruit_id:e}}).then(function(e){i.recruitInfo[t].recruit_like=!i.recruitInfo[t].recruit_like,i.recruitInfo[t].recruit_like?i.recruitInfo[t].recruit_likes++:i.recruitInfo[t].recruit_likes--,i.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},likeActivity:function(t,e){var i=this;a.default.prototype.$http.request({url:"/likes/activity",method:"POST",params:{activity_id:e}}).then(function(e){i.activityInfo[t].activity_like=!i.activityInfo[t].activity_like,i.activityInfo[t].activity_like?i.activityInfo[t].activity_likes++:i.activityInfo[t].activity_likes--,i.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},likeArticle:function(t,e){var i=this;a.default.prototype.$http.request({url:"/likes/article",method:"POST",params:{article_id:e}}).then(function(e){i.articleInfo[t].article_like=!i.articleInfo[t].article_like,i.articleInfo[t].article_like?i.articleInfo[t].article_likes++:i.articleInfo[t].article_likes--,i.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},likeAttention:function(t,e){var i=this;a.default.prototype.$http.request({url:"/likes/article",method:"POST",params:{article_id:e}}).then(function(e){i.attentionInfo[t].article_like=!i.attentionInfo[t].article_like,i.attentionInfo[t].article_like?i.attentionInfo[t].article_likes++:i.attentionInfo[t].article_likes--,i.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},getHeight:function(){var e=this;t.getSystemInfo({success:function(i){e.screen_height=i.windowHeight,e.screen_width=i.windowWidth;var a=t.createSelectorQuery().in(e);a.select("#information").boundingClientRect(function(t){e.scroll_height=e.screen_height-t.top}).exec()}})},getTopicHeight:function(){var e=this;t.getSystemInfo({success:function(i){e.screen_height=i.windowHeight,e.screen_width=i.windowWidth;var a=t.createSelectorQuery().in(e);a.select("#topicSwiper").boundingClientRect(function(t){e.topic_scroll_height=e.screen_height-t.top-25}).exec()}})},navSelect:function(e){var i=this;this.currentNav=e,1==this.currentNav?setTimeout(function(){var e=t.createSelectorQuery().in(i);e.select("#article").boundingClientRect(function(t){i.article_height=t.height}).exec(),e.select("#activity").boundingClientRect(function(t){i.activity_height=t.height}).exec(),e.select("#recruit").boundingClientRect(function(t){i.recruit_height=t.height}).exec(),e.select("#attention").boundingClientRect(function(t){t&&(i.attention_height=t.height)}).exec()},300):2==this.currentNav&&(this.requestRecomendTopic(),setTimeout(function(){i.getTopicHeight()},200),this.requestRecomendAnswer())},topicTabSelect:function(t){this.currentTopicTab=t.currentTarget.dataset.id,this.getTopicHeight()},topicTabSwiper:function(t){this.currentTopicTab=t.detail.current,this.getTopicHeight()},tabSelect:function(t){this.currentTab=t.currentTarget.dataset.id,this.randomScrollHeight(),this.setScrollHeight()},tabSwiper:function(t){this.currentTab=t.detail.current,this.randomScrollHeight(),this.setScrollHeight()},randomScrollHeight:function(){Boolean(Math.round(Math.random()))?0==this.currentTab?this.attention_scroll+=1:1==this.currentTab?this.activity_scroll+=1:2==this.currentTab?this.article_scroll+=1:3==this.currentTab&&(this.recruit_scroll+=1):0==this.currentTab?this.attention_scroll-=1:1==this.currentTab?this.activity_scroll-=1:2==this.currentTab?this.article_scroll-=1:3==this.currentTab&&(this.recruit_scroll-=1)},setScrollHeight:function(){var t=this;this.loadingItem=!0,0==this.currentTab?this.page_scroll=this.attention_scroll:1==this.currentTab?this.page_scroll=this.activity_scroll:2==this.currentTab?this.page_scroll=this.article_scroll:3==this.currentTab&&(this.page_scroll=this.recruit_scroll),setTimeout(function(){t.loadingItem=!1},400)},formatAttentionTime:function(t){var e=this.attentionInfo[t].article_created.split(" "),i=(new Date).toLocaleDateString(),a=Math.abs(Math.ceil((new Date(i)-new Date(e[0]))/864e5)),n=7-a;if(0===a)this.attentionInfo[t].display_time="今天 "+e[1];else if(1===a)this.attentionInfo[t].display_time="昨天 "+e[1];else if(2===a)this.attentionInfo[t].display_time="前天 "+e[1];else if(n>0){var r=new Date(this.attentionInfo[t].article_created).getDay();switch(r){case 0:this.attentionInfo[t].display_time="星期天 "+e[1];break;case 1:this.attentionInfo[t].display_time="星期一 "+e[1];break;case 2:this.attentionInfo[t].display_time="星期二 "+e[1];break;case 3:this.attentionInfo[t].display_time="星期三 "+e[1];break;case 4:this.attentionInfo[t].display_time="星期四 "+e[1];break;case 5:this.attentionInfo[t].display_time="星期五 "+e[1];break;case 6:this.attentionInfo[t].display_time="星期六 "+e[1];break}}else this.attentionInfo[t].display_time=this.attentionInfo[t].article_created},formatArticleTime:function(t){var e=this.articleInfo[t].article_created.split(" "),i=(new Date).toLocaleDateString(),a=Math.abs(Math.ceil((new Date(i)-new Date(e[0]))/864e5)),n=7-a;if(0===a)this.articleInfo[t].display_time="今天 "+e[1];else if(1===a)this.articleInfo[t].display_time="昨天 "+e[1];else if(2===a)this.articleInfo[t].display_time="前天 "+e[1];else if(n>0){var r=new Date(this.articleInfo[t].article_created).getDay();switch(r){case 0:this.articleInfo[t].display_time="星期天 "+e[1];break;case 1:this.articleInfo[t].display_time="星期一 "+e[1];break;case 2:this.articleInfo[t].display_time="星期二 "+e[1];break;case 3:this.articleInfo[t].display_time="星期三 "+e[1];break;case 4:this.articleInfo[t].display_time="星期四 "+e[1];break;case 5:this.articleInfo[t].display_time="星期五 "+e[1];break;case 6:this.articleInfo[t].display_time="星期六 "+e[1];break}}else this.articleInfo[t].display_time=this.articleInfo[t].article_created},formatActivityTime:function(t){var e=this.activityInfo[t].activity_created.split(" "),i=(new Date).toLocaleDateString(),a=Math.abs(Math.ceil((new Date(i)-new Date(e[0]))/864e5)),n=7-a;if(0===a)this.activityInfo[t].display_time="今天 "+e[1];else if(1===a)this.activityInfo[t].display_time="昨天 "+e[1];else if(2===a)this.activityInfo[t].display_time="前天 "+e[1];else if(n>0){var r=new Date(this.activityInfo[t].activity_created).getDay();switch(r){case 0:this.activityInfo[t].display_time="星期天 "+e[1];break;case 1:this.activityInfo[t].display_time="星期一 "+e[1];break;case 2:this.activityInfo[t].display_time="星期二 "+e[1];break;case 3:this.activityInfo[t].display_time="星期三 "+e[1];break;case 4:this.activityInfo[t].display_time="星期四 "+e[1];break;case 5:this.activityInfo[t].display_time="星期五 "+e[1];break;case 6:this.activityInfo[t].display_time="星期六 "+e[1];break}}else this.activityInfo[t].display_time=this.activityInfo[t].activity_created},formatRecruitTime:function(t){var e=this.recruitInfo[t].recruit_created.split(" "),i=(new Date).toLocaleDateString(),a=Math.abs(Math.ceil((new Date(i)-new Date(e[0]))/864e5)),n=7-a;if(0===a)this.recruitInfo[t].display_time="今天 "+e[1];else if(1===a)this.recruitInfo[t].display_time="昨天 "+e[1];else if(2===a)this.recruitInfo[t].display_time="前天 "+e[1];else if(n>0){var r=new Date(this.recruitInfo[t].recruit_created).getDay();switch(r){case 0:this.recruitInfo[t].display_time="星期天 "+e[1];break;case 1:this.recruitInfo[t].display_time="星期一 "+e[1];break;case 2:this.recruitInfo[t].display_time="星期二 "+e[1];break;case 3:this.recruitInfo[t].display_time="星期三 "+e[1];break;case 4:this.recruitInfo[t].display_time="星期四 "+e[1];break;case 5:this.recruitInfo[t].display_time="星期五 "+e[1];break;case 6:this.recruitInfo[t].display_time="星期六 "+e[1];break}}else this.recruitInfo[t].display_time=this.recruitInfo[t].recruit_created}}};e.default=o}).call(this,i("a821")["default"])},"8e3e":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement;t._self._c},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},d240:function(t,e,i){"use strict";i.r(e);var a=i("8e3e"),n=i("5ec9");for(var r in n)"default"!==r&&function(t){i.d(e,t,function(){return n[t]})}(r);i("939f");var o=i("2877"),c=Object(o["a"])(n["default"],a["a"],a["b"],!1,null,"14b9bfd0",null);e["default"]=c.exports},e8a1:function(t,e,i){"use strict";(function(t){i("499b"),i("921b");a(i("66fd"));var e=a(i("d240"));function a(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,i("a821")["createPage"])}},[["e8a1","common/runtime","common/vendor"]]]);