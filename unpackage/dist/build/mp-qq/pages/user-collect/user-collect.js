(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user-collect/user-collect"],{"1c9b":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a=r(e("66fd")),n=e("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function c(t){for(var i=1;i<arguments.length;i++){var e=null!=arguments[i]?arguments[i]:{},a=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.forEach(function(i){o(t,i,e[i])})}return t}function o(t,i,e){return i in t?Object.defineProperty(t,i,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[i]=e,t}var s=function(){return e.e("components/waterfall-flow/waterfall-flow").then(e.bind(null,"feaa"))},f={data:function(){return{TabCur:0,menu_list:["动态","活动","头条","话题","回答","商品","招募"],scroll_left:0,screen_width:400,scroll_height:600,articleInfo:[],activityInfo:[],recruitInfo:[],newsInfo:[],commodityInfo:[],topicInfo:[],answerInfo:[],imageList:[],loading:!1}},computed:c({},(0,n.mapState)({user:function(t){return t.AuthUser}})),components:{WaterfallFlow:s},onShareAppMessage:function(t){return{title:"快来围观微校～～",path:"/pages/index/index",imageUrl:"/static/user/shareImage.jpg"}},onLoad:function(t){var i=this;this.user_id=t.user_id,this.loading=!0,a.default.prototype.$http.request({url:"/users/collect",method:"POST",params:{user_id:this.user_id}}).then(function(t){i.articleInfo=t.data.data.articles,i.formatArticleInfo(),i.activityInfo=t.data.data.activities,i.formatActivityInfo(),i.recruitInfo=t.data.data.recruits,i.formatRecruitInfo(),i.topicInfo=t.data.data.topics,i.formatTopicInfo(),i.answerInfo=t.data.data.answers,i.formatAnswerInfo(),i.newsInfo=t.data.data.news,i.commodityInfo=t.data.data.commodities,i.loading=!1}),this.getHeight()},methods:{navigateTopic:function(i){t.navigateTo({url:"/pages/topic/topic?topic_id="+i})},navigateAnswer:function(i){t.navigateTo({url:"/pages/answer/answer?answer_id="+i})},formatTopicInfo:function(){for(var t in this.topicInfo){for(var i in this.topicInfo[t].topic_images)this.imageList.push(this.topicInfo[t].topic_images[i].image_url);this.topicInfo[t].topic_content=this.topicInfo[t].topic_content.replace(/<br\/\>/g,"\n"),this.formatArticleTime(t)}},formatAnswerInfo:function(){for(var t in this.answerInfo){for(var i in this.answerInfo[t].answer_images)this.imageList.push(this.answerInfo[t].answer_images[i].image_url);this.answerInfo[t].answer_content=this.answerInfo[t].answer_content.replace(/<br\/\>/g,"\n"),this.formatArticleTime(t)}},formatArticleInfo:function(){for(var t in this.articleInfo){for(var i in this.articleInfo[t].article_images)this.imageList.push(this.articleInfo[t].article_images[i].image_url);this.articleInfo[t].article_content=this.articleInfo[t].article_content.replace(/<br\/\>/g,"\n"),this.formatArticleTime(t)}},formatActivityInfo:function(){for(var t in this.activityInfo){for(var i in this.activityInfo[t].activity_images)this.imageList.push(this.activityInfo[t].activity_images[i].image_url);this.activityInfo[t].activity_content=this.activityInfo[t].activity_content.replace(/<br\/\>/g,"\n"),this.activityInfo[t].activity_attention&&(this.activityInfo[t].activity_attention=this.activityInfo[t].activity_attention.replace(/<br\/\>/g,"\n")),this.formatActivityTime(t)}},formatRecruitInfo:function(){for(var t in this.recruitInfo){for(var i in this.recruitInfo[t].recruit_images)this.imageList.push(this.recruitInfo[t].recruit_images[i].image_url);this.recruitInfo[t].recruit_content=this.recruitInfo[t].recruit_content.replace(/<br\/\>/g,"\n"),this.formatRecruitTime(t)}},getHeight:function(){var i=this;t.getSystemInfo({success:function(e){i.screen_height=e.windowHeight,i.screen_width=e.windowWidth;var a=t.createSelectorQuery().in(i);a.select("#swiper").boundingClientRect(function(t){i.scroll_height=i.screen_height-t.top}).exec()}})},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scroll_left=(t.currentTarget.dataset.id-1)*(this.screen_width/4)},tabSwiper:function(t){this.TabCur=t.detail.current,this.scroll_left=(this.TabCur-1)*(this.screen_width/4)},navigateNews:function(i){t.navigateTo({url:"/pages/news/news?news_id="+i})},navigateArticle:function(i,e){t.navigateTo({url:"/pages/article/article?article_id="+i+"&comment="+e})},navigateActivity:function(i,e){t.navigateTo({url:"/pages/activity/activity?activity_id="+i+"&comment="+e})},navigateRecruit:function(i,e){t.navigateTo({url:"/pages/recruit/recruit?recruit_id="+i+"&comment="+e})},navigateCommodity:function(i){t.navigateTo({url:"/pages/commodity/commodity?commodity_id="+i})},viewImage:function(i){t.previewImage({urls:this.imageList,current:i.currentTarget.dataset.url})},likeRecruit:function(t,i){var e=this;a.default.prototype.$http.request({url:"/likes/recruit",method:"POST",params:{recruit_id:i}}).then(function(i){e.recruitInfo[t].recruit_like=!e.recruitInfo[t].recruit_like,e.recruitInfo[t].recruit_like?e.recruitInfo[t].recruit_likes++:e.recruitInfo[t].recruit_likes--,e.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},likeActivity:function(t,i){var e=this;a.default.prototype.$http.request({url:"/likes/activity",method:"POST",params:{activity_id:i}}).then(function(i){e.activityInfo[t].activity_like=!e.activityInfo[t].activity_like,e.activityInfo[t].activity_like?e.activityInfo[t].activity_likes++:e.activityInfo[t].activity_likes--,e.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},likeArticle:function(t,i){var e=this;a.default.prototype.$http.request({url:"/likes/article",method:"POST",params:{article_id:i}}).then(function(i){e.articleInfo[t].article_like=!e.articleInfo[t].article_like,e.articleInfo[t].article_like?e.articleInfo[t].article_likes++:e.articleInfo[t].article_likes--,e.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},likeAttention:function(t,i){var e=this;a.default.prototype.$http.request({url:"/likes/article",method:"POST",params:{article_id:i}}).then(function(i){e.attentionInfo[t].article_like=!e.attentionInfo[t].article_like,e.attentionInfo[t].article_like?e.attentionInfo[t].article_likes++:e.attentionInfo[t].article_likes--,e.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},formatArticleTime:function(t){var i=this.articleInfo[t].article_created.split(" "),e=(new Date).toLocaleDateString(),a=Math.abs(Math.ceil((new Date(e)-new Date(i[0]))/864e5)),n=7-a;if(0===a)this.articleInfo[t].display_time="今天 "+i[1];else if(1===a)this.articleInfo[t].display_time="昨天 "+i[1];else if(2===a)this.articleInfo[t].display_time="前天 "+i[1];else if(n>0){var r=new Date(this.articleInfo[t].article_created).getDay();switch(r){case 0:this.articleInfo[t].display_time="星期天 "+i[1];break;case 1:this.articleInfo[t].display_time="星期一 "+i[1];break;case 2:this.articleInfo[t].display_time="星期二 "+i[1];break;case 3:this.articleInfo[t].display_time="星期三 "+i[1];break;case 4:this.articleInfo[t].display_time="星期四 "+i[1];break;case 5:this.articleInfo[t].display_time="星期五 "+i[1];break;case 6:this.articleInfo[t].display_time="星期六 "+i[1];break}}else this.articleInfo[t].display_time=this.articleInfo[t].article_created},formatActivityTime:function(t){var i=this.activityInfo[t].activity_created.split(" "),e=(new Date).toLocaleDateString(),a=Math.abs(Math.ceil((new Date(e)-new Date(i[0]))/864e5)),n=7-a;if(0===a)this.activityInfo[t].display_time="今天 "+i[1];else if(1===a)this.activityInfo[t].display_time="昨天 "+i[1];else if(2===a)this.activityInfo[t].display_time="前天 "+i[1];else if(n>0){var r=new Date(this.activityInfo[t].activity_created).getDay();switch(r){case 0:this.activityInfo[t].display_time="星期天 "+i[1];break;case 1:this.activityInfo[t].display_time="星期一 "+i[1];break;case 2:this.activityInfo[t].display_time="星期二 "+i[1];break;case 3:this.activityInfo[t].display_time="星期三 "+i[1];break;case 4:this.activityInfo[t].display_time="星期四 "+i[1];break;case 5:this.activityInfo[t].display_time="星期五 "+i[1];break;case 6:this.activityInfo[t].display_time="星期六 "+i[1];break}}else this.activityInfo[t].display_time=this.activityInfo[t].activity_created},formatRecruitTime:function(t){var i=this.recruitInfo[t].recruit_created.split(" "),e=(new Date).toLocaleDateString(),a=Math.abs(Math.ceil((new Date(e)-new Date(i[0]))/864e5)),n=7-a;if(0===a)this.recruitInfo[t].display_time="今天 "+i[1];else if(1===a)this.recruitInfo[t].display_time="昨天 "+i[1];else if(2===a)this.recruitInfo[t].display_time="前天 "+i[1];else if(n>0){var r=new Date(this.recruitInfo[t].recruit_created).getDay();switch(r){case 0:this.recruitInfo[t].display_time="星期天 "+i[1];break;case 1:this.recruitInfo[t].display_time="星期一 "+i[1];break;case 2:this.recruitInfo[t].display_time="星期二 "+i[1];break;case 3:this.recruitInfo[t].display_time="星期三 "+i[1];break;case 4:this.recruitInfo[t].display_time="星期四 "+i[1];break;case 5:this.recruitInfo[t].display_time="星期五 "+i[1];break;case 6:this.recruitInfo[t].display_time="星期六 "+i[1];break}}else this.recruitInfo[t].display_time=this.recruitInfo[t].recruit_created}}};i.default=f}).call(this,e("a821")["default"])},"295e":function(t,i,e){"use strict";(function(t){e("499b"),e("921b");a(e("66fd"));var i=a(e("7f4e"));function a(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("a821")["createPage"])},"65dd":function(t,i,e){"use strict";var a=function(){var t=this,i=t.$createElement;t._self._c},n=[];e.d(i,"a",function(){return a}),e.d(i,"b",function(){return n})},"7f4e":function(t,i,e){"use strict";e.r(i);var a=e("65dd"),n=e("b42b");for(var r in n)"default"!==r&&function(t){e.d(i,t,function(){return n[t]})}(r);e("2eb7");var c=e("2877"),o=Object(c["a"])(n["default"],a["a"],a["b"],!1,null,null,null);i["default"]=o.exports},b42b:function(t,i,e){"use strict";e.r(i);var a=e("1c9b"),n=e.n(a);for(var r in a)"default"!==r&&function(t){e.d(i,t,function(){return a[t]})}(r);i["default"]=n.a}},[["295e","common/runtime","common/vendor"]]]);