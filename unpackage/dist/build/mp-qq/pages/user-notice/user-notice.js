(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user-notice/user-notice"],{"1ee7":function(t,i,e){"use strict";e.r(i);var n=e("7bf2"),o=e("9317");for(var a in o)"default"!==a&&function(t){e.d(i,t,function(){return o[t]})}(a);e("9746");var c=e("2877"),s=Object(c["a"])(o["default"],n["a"],n["b"],!1,null,null,null);i["default"]=s.exports},"7bf2":function(t,i,e){"use strict";var n=function(){var t=this,i=t.$createElement;t._self._c},o=[];e.d(i,"a",function(){return n}),e.d(i,"b",function(){return o})},"898a":function(t,i,e){"use strict";(function(t){Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=o(e("66fd"));function o(t){return t&&t.__esModule?t:{default:t}}var a={data:function(){return{user_id:0,noticeInfo:[],scroll_height:700,loading:!1,modalName:"",links:{}}},onLoad:function(t){var i=this;this.user_id=t.user_id,this.loading=!0,n.default.prototype.$http.request({url:"/users/notification",method:"POST",params:{user_id:this.user_id}}).then(function(t){for(var e in i.noticeInfo=t.data.data,i.links=t.data.links,i.noticeInfo)i.formatNotificationTime(e);i.loading=!1,i.$store.dispatch("clearNoticeCount")})},onShareAppMessage:function(t){return{title:"快来围观微校～～",path:"/pages/index/index",imageUrl:"/static/user/shareImage.jpg"}},mounted:function(){this.getHeight()},methods:{loadNextPage:function(){var t=this;this.links.next&&(this.loading=!0,n.default.prototype.$http.request({url:this.links.next,method:"POST",params:{user_id:this.user_id}}).then(function(i){for(var e in t.links=i.data.links,t.noticeInfo.push.apply(t.noticeInfo,i.data.data),t.noticeInfo)t.formatNotificationTime(e);t.loading=!1}))},deleteNotice:function(t,i){var e=this;n.default.prototype.$http.request({url:"/notifications/delete",method:"POST",params:{notification_id:t}}).then(function(t){e.noticeInfo.splice(i,1),e.$refs.notification.open({type:"success",content:"删除成功",timeout:1500,isClick:!1})}).catch(function(t){e.$refs.notification.open({type:"warn",content:"删除失败",timeout:1500,isClick:!1})})},ListTouchStart:function(t){this.listTouchStart=t.touches[0].pageX},ListTouchMove:function(t){this.listTouchDirection=t.touches[0].pageX-this.listTouchStart>0?"right":"left"},ListTouchEnd:function(t){"left"==this.listTouchDirection?this.modalName=t.currentTarget.dataset.target:this.modalName=null,this.listTouchDirection=null},navigateTarget:function(i){switch(this.noticeInfo[i].notification_type){case"commodity_comment":t.navigateTo({url:"/pages/commodity/commodity?commodity_id="+this.noticeInfo[i].notification_target_id+"&comment=1"});break;case"article_comment":t.navigateTo({url:"/pages/article/article?article_id="+this.noticeInfo[i].notification_target_id+"&comment=1"});break;case"activity_comment":t.navigateTo({url:"/pages/activity/activity?activity_id="+this.noticeInfo[i].notification_target_id+"&comment=1"});break;case"recruit_comment":t.navigateTo({url:"/pages/recruit/recruit?recruit_id="+this.noticeInfo[i].notification_target_id+"&comment=1"});break;case"answer_comment":t.navigateTo({url:"/pages/answer/answer?answer_id="+this.noticeInfo[i].notification_target_id+"&comment=1"});break}},getHeight:function(){var i=this;t.getSystemInfo({success:function(e){i.screen_height=e.windowHeight,i.screen_width=e.windowWidth;var n=t.createSelectorQuery().in(i);n.select("#scroll").boundingClientRect(function(t){i.scroll_height=i.screen_height-t.top}).exec()}})},formatNotificationTime:function(t){var i=this.noticeInfo[t].notification_created.split(" "),e=(new Date).toLocaleDateString(),n=Math.abs(Math.ceil((new Date(e)-new Date(i[0]))/864e5)),o=7-n;if(0===n)this.noticeInfo[t].display_time="今天 "+i[1];else if(1===n)this.noticeInfo[t].display_time="昨天 "+i[1];else if(2===n)this.noticeInfo[t].display_time="前天 "+i[1];else if(o>0){var a=new Date(this.noticeInfo[t].notification_created).getDay();switch(a){case 0:this.noticeInfo[t].display_time="星期天 "+i[1];break;case 1:this.noticeInfo[t].display_time="星期一 "+i[1];break;case 2:this.noticeInfo[t].display_time="星期二 "+i[1];break;case 3:this.noticeInfo[t].display_time="星期三 "+i[1];break;case 4:this.noticeInfo[t].display_time="星期四 "+i[1];break;case 5:this.noticeInfo[t].display_time="星期五 "+i[1];break;case 6:this.noticeInfo[t].display_time="星期六 "+i[1];break}}else this.noticeInfo[t].display_time=this.noticeInfo[t].notification_created}}};i.default=a}).call(this,e("a821")["default"])},9317:function(t,i,e){"use strict";e.r(i);var n=e("898a"),o=e.n(n);for(var a in n)"default"!==a&&function(t){e.d(i,t,function(){return n[t]})}(a);i["default"]=o.a},9941:function(t,i,e){"use strict";(function(t){e("499b"),e("921b");n(e("66fd"));var i=n(e("1ee7"));function n(t){return t&&t.__esModule?t:{default:t}}t(i.default)}).call(this,e("a821")["createPage"])}},[["9941","common/runtime","common/vendor"]]]);