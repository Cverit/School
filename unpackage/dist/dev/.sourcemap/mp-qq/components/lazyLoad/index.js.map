{"version":3,"sources":["webpack:////Users/yuanhy/Desktop/Chat/components/lazyLoad/index.vue?47a4","webpack:////Users/yuanhy/Desktop/Chat/components/lazyLoad/index.vue?274c","webpack:////Users/yuanhy/Desktop/Chat/components/lazyLoad/index.vue?c61f","webpack:////Users/yuanhy/Desktop/Chat/components/lazyLoad/index.vue?6fec","webpack:////Users/yuanhy/Desktop/Chat/components/lazyLoad/index.vue","webpack:////Users/yuanhy/Desktop/Chat/components/lazyLoad/index.vue?e1f6","webpack:////Users/yuanhy/Desktop/Chat/components/lazyLoad/index.vue?175c"],"names":["props","src","type","String","default","mode","scrollId","className","data","guid","animeSwitchTime","isShowImg","imgLoadState","start","end","path","loading","error","componentName","count","nextLoad","loadingAnime","computed","hasLoadingRes","Boolean","hasErrorRes","methods","$_init","Tools","getGUID","lazyLoadPlugin","getConfig","$_setImgType","$_on","on","id","context","$refs","fn","Promise","resolve","reject","$_minLoadAnime","$watch","config","name","imgLoadSuccess","$_imgLoadCommon","imgLoadError","time","minLoadAnimeTime","setTimeout","$_intervalLoad","intervalTime","watch","val","created","components","AnimeStateSwitch","loadingExport","errorExport"],"mappings":"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","file":"components/lazyLoad/index.js","sourcesContent":["import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=72e8af7c&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('72e8af7c', component.options)\n    } else {\n      api.reload('72e8af7c', component.options)\n    }\n    module.hot.accept(\"./index.vue?vue&type=template&id=72e8af7c&\", function () {\n      api.rerender('72e8af7c', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"Users/yuanhy/Desktop/Chat/components/lazyLoad/index.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=72e8af7c&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport AnimeStateSwitch from './AnimeStateSwitch';\nimport loadingExport from './loadingExport';\nimport errorExport from './errorExport';\nimport lazyLoadPlugin from './js/index';\nimport Tools from './js/tools';\n\nexport default {\n    props: {\n        // 图片路径\n        src: {\n            type: String,\n            default: ''\n        },\n\n        // 图片裁剪、缩放的模式\n        mode: {\n            type: String,\n            default: 'scaleToFill'\n        },\n\n        // 当前组件所在的scroll标签内的id\n        scrollId: {\n            type: String\n        },\n\n        // 自定义样式名称\n        className: {\n            type: String,\n            default: null\n        }\n    },\n\n    data() {\n        return {\n            // 图片 id\n            guid: '',\n\n            // 动画过度时间\n            animeSwitchTime: 500,\n\n            // 是否显示图片\n            isShowImg: false,\n\n            // 图片加载状态\n            imgLoadState: {\n                start: false,\n                end: false\n            },\n\n            // 加载动画的图片名称\n            path: {\n                loading: null,\n                error: null\n            },\n\n            // 加载动画的组件名称\n            componentName: {\n                loading: null,\n                error: null\n            },\n\n            // 统计次数\n            count: {\n                nextLoad: 0,\n                loadingAnime: 0\n            }\n        };\n    },\n\n    computed: {\n        // 是否有 loading 资源\n        hasLoadingRes() {\n            return Boolean(this.path.loading || this.componentName.loading);\n        },\n\n        // 是否有 error 资源\n        hasErrorRes() {\n            return Boolean(this.path.error || this.componentName.error);\n        }\n    },\n\n    methods: {\n        // 初始化\n        $_init() {\n            this.guid = Tools.getGUID();\n            this.animeSwitchTime = lazyLoadPlugin.getConfig().animeSwitchTime;\n            this.$_setImgType('loading');\n            this.$_on();\n        },\n\n        // 订阅并监听图片加载状态\n        $_on() {\n            lazyLoadPlugin.on({\n                id: this.scrollId,\n                guid: '#' + this.guid,\n                context: this.$refs.loading,\n                fn: () => {\n                    return new Promise((resolve, reject) => {\n                        this.imgLoadState.start = true;\n                        this.count.loadingAnime++;\n                        this.$_minLoadAnime();\n                        this.$watch('imgLoadState.end', resolve);\n                    });\n                }\n            });\n        },\n\n        // 设置图片\n        $_setImgType(type) {\n            const config = lazyLoadPlugin.getConfig();\n\n            if (config[type].type === 'img') {\n                this.path[type] = config[type].path;\n            } else if (config[type].type === 'component') {\n                this.componentName[type] = config[type].name;\n            }\n        },\n\n        // 图片加载完成\n        imgLoadSuccess() {\n            this.$_imgLoadCommon();\n        },\n\n        // 图片加载出错\n        imgLoadError() {\n            this.$_imgLoadCommon();\n            this.$_setImgType('error');\n        },\n\n        // 图片加载相同部分\n        $_imgLoadCommon() {\n            this.count.nextLoad++;\n            this.count.loadingAnime++;\n            this.$_minLoadAnime();\n        },\n\n        // 最少过度动画时间\n        $_minLoadAnime() {\n            if (this.count.loadingAnime != 2) return;\n\n            let { minLoadAnimeTime: time } = lazyLoadPlugin.getConfig();\n\n            setTimeout(() => {\n                this.isShowImg = true;\n                this.count.nextLoad++;\n            }, time);\n        },\n\n        // 图片加载间隔(停顿)时间\n        $_intervalLoad() {\n            let { intervalTime: time } = lazyLoadPlugin.getConfig();\n\n            setTimeout(() => {\n                this.imgLoadState.end = true;\n            }, time);\n        }\n    },\n\n    watch: {\n        'count.nextLoad'(val) {\n            val === 2 && this.$_intervalLoad();\n        }\n    },\n\n    created() {\n        this.$_init();\n    },\n\n    components: {\n        AnimeStateSwitch,\n        loadingExport,\n        errorExport\n    }\n};\n","import mod from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/index.js??ref--8-oneOf-1-2!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-4!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader/index.js??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin"],"sourceRoot":""}