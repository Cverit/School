(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/commodity/commodity"],{131:
/*!***********************************************************************************!*\
  !*** /Users/yuanhy/Desktop/Chat/main.js?{"page":"pages%2Fcommodity%2Fcommodity"} ***!
  \***********************************************************************************/
/*! no static exports found */function(t,o,i){"use strict";(function(t){i(/*! uni-pages */4),i(/*! @dcloudio/uni-stat */5);o(i(/*! vue */2));function o(t){return t&&t.__esModule?t:{default:t}}t(o(i(/*! ./pages/commodity/commodity.vue */132)).default)}).call(this,i(/*! ./node_modules/@dcloudio/uni-mp-qq/dist/index.js */1).createPage)},132:
/*!****************************************************************!*\
  !*** /Users/yuanhy/Desktop/Chat/pages/commodity/commodity.vue ***!
  \****************************************************************/
/*! no static exports found */function(t,o,i){"use strict";i.r(o);var e=i(/*! ./commodity.vue?vue&type=template&id=c6c193a8& */133),m=i(/*! ./commodity.vue?vue&type=script&lang=js& */135);for(var n in m)"default"!==n&&function(t){i.d(o,t,function(){return m[t]})}(n);i(/*! ./commodity.css?vue&type=style&index=0&lang=css& */137);var c=i(/*! ../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js */15),s=Object(c.default)(m.default,e.render,e.staticRenderFns,!1,null,null,null);s.options.__file="Users/yuanhy/Desktop/Chat/pages/commodity/commodity.vue",o.default=s.exports},133:
/*!***********************************************************************************************!*\
  !*** /Users/yuanhy/Desktop/Chat/pages/commodity/commodity.vue?vue&type=template&id=c6c193a8& ***!
  \***********************************************************************************************/
/*! exports provided: render, staticRenderFns */function(t,o,i){"use strict";i.r(o);var e=i(/*! -!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./commodity.vue?vue&type=template&id=c6c193a8& */134);i.d(o,"render",function(){return e.render}),i.d(o,"staticRenderFns",function(){return e.staticRenderFns})},134:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/yuanhy/Desktop/Chat/pages/commodity/commodity.vue?vue&type=template&id=c6c193a8& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(t,o,i){"use strict";i.r(o),i.d(o,"render",function(){return e}),i.d(o,"staticRenderFns",function(){return m});var e=function(){var t=this.$createElement;this._self._c},m=[];e._withStripped=!0},135:
/*!*****************************************************************************************!*\
  !*** /Users/yuanhy/Desktop/Chat/pages/commodity/commodity.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************/
/*! no static exports found */function(t,o,i){"use strict";i.r(o);var e=i(/*! -!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./commodity.vue?vue&type=script&lang=js& */136),m=i.n(e);for(var n in e)"default"!==n&&function(t){i.d(o,t,function(){return e[t]})}(n);o.default=m.a},136:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/yuanhy/Desktop/Chat/pages/commodity/commodity.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,o,i){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var e=m(i(/*! vue */2));function m(t){return t&&t.__esModule?t:{default:t}}var n=new(m(i(/*! ../../js_sdk/qqmap-wx-jssdk1.2/qqmap-wx-jssdk.js */31)).default)({key:"QL7BZ-ZCJKK-72IJS-A6NA6-HRJ3F-ZYB6J"}),c={data:function(){return{display:!1,commodity_id:0,scroll_height:700,commodityInfo:[],imageList:[],displayLocation:"",isInput:!1,inputComment:"",comment_page:1}},components:{WaterfallFlow:function(){return i.e(/*! import() | components/waterfall-flow/waterfall-flow */"components/waterfall-flow/waterfall-flow").then(i.bind(null,/*! ../../components/waterfall-flow/waterfall-flow.vue */160))}},computed:{hasComment:function(){return 0!=this.commodityInfo.length&&0!=this.commodityInfo.commodity_comments.length}},onLoad:function(t){var o=this;this.commodity_id=t.commodity_id;var i=this;e.default.prototype.$http.request({url:"/commodities/detail",method:"POST",params:{commodity_id:this.commodity_id}}).then(function(t){for(var e in o.commodityInfo=t.data.data,o.commodityInfo.commodity_images)o.imageList.push(o.commodityInfo.commodity_images[e].image_url);for(var m in o.commodityInfo.commodity_comments)o.formatTime(m);var c=o.commodityInfo.commodity_location.split(",");n.reverseGeocoder({location:{latitude:c[0],longitude:c[1]},success:function(t){i.displayLocation=t.result.address_component.city+t.result.address_component.district}})})},mounted:function(){var t=this;setTimeout(function(){t.display=!0},100),setTimeout(function(){t.getHeight()},200)},methods:{formatCommodityContent:function(){this.commodityInfo.commodity_description=this.commodityInfo.commodity_description.replace(/<br\/\>/g,"\n")},navigateCommodity:function(o){t.navigateTo({url:"/pages/commodity/commodity?commodity_id="+o})},displayMoreComments:function(){this.comment_page++},likeComment:function(t,o){var i=this;e.default.prototype.$http.request({url:"/likes/comment",method:"POST",params:{comment_id:o}}).then(function(o){i.commodityInfo.commodity_comments[t].comment_like=!i.commodityInfo.commodity_comments[t].comment_like,i.commodityInfo.commodity_comments[t].comment_like?i.commodityInfo.commodity_comments[t].comment_likes++:i.commodityInfo.commodity_comments[t].comment_likes--,i.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},likeCommodity:function(){var t=this;e.default.prototype.$http.request({url:"/likes/commodity",method:"POST",params:{commodity_id:this.commodity_id}}).then(function(o){t.commodityInfo.commodity_like=!t.commodityInfo.commodity_like,t.commodityInfo.commodity_like?t.commodityInfo.commodity_likes++:t.commodityInfo.commodity_likes--,t.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},CollectCommodity:function(){var t=this;e.default.prototype.$http.request({url:"/collections/commodity",method:"POST",params:{commodity_id:this.commodity_id}}).then(function(o){t.commodityInfo.commodity_collect=!t.commodityInfo.commodity_collect,t.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},submitComment:function(){var t=this;""==this.inputComment&&this.$refs.notification.open({type:"warn",content:"留言不能为空～",timeout:1500,isClick:!1}),e.default.prototype.$http.request({url:"/comments/commodity/create",method:"POST",params:{commodity_id:this.commodity_id,comment_content:this.inputComment,parent_id:0}}).then(function(o){t.commodityInfo.commodity_comments.unshift(o.data.data),t.formatTime(0),t.cancelInput(),t.inputComment="",t.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},beginInput:function(){this.isInput=!0},cancelInput:function(){this.isInput=!1},viewImage:function(o){t.previewImage({urls:this.imageList,current:o.currentTarget.dataset.url})},getHeight:function(){var o=this;t.getSystemInfo({success:function(i){o.screen_height=i.windowHeight,o.screen_width=i.windowWidth;t.createSelectorQuery().in(o).select("#scroll").boundingClientRect(function(t){o.scroll_height=o.screen_height-t.top-55}).exec()}})},formatTime:function(t){var o=this.commodityInfo.commodity_comments[t].comment_created.split(" "),i=(new Date).toLocaleDateString(),e=Math.abs(Math.ceil((new Date(i)-new Date(o[0]))/864e5)),m=7-e;if(0===e)this.commodityInfo.commodity_comments[t].display_time="今天 "+o[1];else if(1===e)this.commodityInfo.commodity_comments[t].display_time="昨天 "+o[1];else if(2===e)this.commodityInfo.commodity_comments[t].display_time="前天 "+o[1];else{if(m>0)switch(new Date(this.commodityInfo.commodity_comments[t].comment_created).getDay()){case 0:this.commodityInfo.commodity_comments[t].display_time="星期天 "+o[1];break;case 1:this.commodityInfo.commodity_comments[t].display_time="星期一 "+o[1];break;case 2:this.commodityInfo.commodity_comments[t].display_time="星期二 "+o[1];break;case 3:this.commodityInfo.commodity_comments[t].display_time="星期三 "+o[1];break;case 4:this.commodityInfo.commodity_comments[t].display_time="星期四 "+o[1];break;case 5:this.commodityInfo.commodity_comments[t].display_time="星期五 "+o[1];break;case 6:this.commodityInfo.commodity_comments[t].display_time="星期六 "+o[1]}else this.commodityInfo.commodity_comments[t].display_time=this.commodityInfo.commodity_comments[t].created_at}}}};o.default=c}).call(this,i(/*! ./node_modules/@dcloudio/uni-mp-qq/dist/index.js */1).default)}},[[131,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-qq/pages/commodity/commodity.js.map