(global.webpackJsonp=global.webpackJsonp||[]).push([["pages/commodity/commodity"],{131:
/*!***********************************************************************************!*\
  !*** /Users/yuanhy/Desktop/Chat/main.js?{"page":"pages%2Fcommodity%2Fcommodity"} ***!
  \***********************************************************************************/
/*! no static exports found */function(t,o,e){"use strict";(function(t){e(/*! uni-pages */4),e(/*! @dcloudio/uni-stat */5);o(e(/*! vue */2));function o(t){return t&&t.__esModule?t:{default:t}}t(o(e(/*! ./pages/commodity/commodity.vue */132)).default)}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-qq/dist/index.js */1).createPage)},132:
/*!****************************************************************!*\
  !*** /Users/yuanhy/Desktop/Chat/pages/commodity/commodity.vue ***!
  \****************************************************************/
/*! no static exports found */function(t,o,e){"use strict";e.r(o);var i=e(/*! ./commodity.vue?vue&type=template&id=c6c193a8& */133),n=e(/*! ./commodity.vue?vue&type=script&lang=js& */135);for(var m in n)"default"!==m&&function(t){e.d(o,t,function(){return n[t]})}(m);e(/*! ./commodity.css?vue&type=style&index=0&lang=css& */137);var c=e(/*! ../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib/runtime/componentNormalizer.js */15),s=Object(c.default)(n.default,i.render,i.staticRenderFns,!1,null,null,null);s.options.__file="Users/yuanhy/Desktop/Chat/pages/commodity/commodity.vue",o.default=s.exports},133:
/*!***********************************************************************************************!*\
  !*** /Users/yuanhy/Desktop/Chat/pages/commodity/commodity.vue?vue&type=template&id=c6c193a8& ***!
  \***********************************************************************************************/
/*! exports provided: render, staticRenderFns */function(t,o,e){"use strict";e.r(o);var i=e(/*! -!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./commodity.vue?vue&type=template&id=c6c193a8& */134);e.d(o,"render",function(){return i.render}),e.d(o,"staticRenderFns",function(){return i.staticRenderFns})},134:
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-hbuilderx/packages/webpack-uni-nvue-loader/lib/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--17-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/yuanhy/Desktop/Chat/pages/commodity/commodity.vue?vue&type=template&id=c6c193a8& ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns */function(t,o,e){"use strict";e.r(o),e.d(o,"render",function(){return i}),e.d(o,"staticRenderFns",function(){return n});var i=function(){var t=this.$createElement;this._self._c},n=[];i._withStripped=!0},135:
/*!*****************************************************************************************!*\
  !*** /Users/yuanhy/Desktop/Chat/pages/commodity/commodity.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************/
/*! no static exports found */function(t,o,e){"use strict";e.r(o);var i=e(/*! -!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/vue-loader/lib??vue-loader-options!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./commodity.vue?vue&type=script&lang=js& */136),n=e.n(i);for(var m in i)"default"!==m&&function(t){e.d(o,t,function(){return i[t]})}(m);o.default=n.a},136:
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-custom-block-loader??ref--0-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!/Users/yuanhy/Desktop/Chat/pages/commodity/commodity.vue?vue&type=script&lang=js& ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var i=m(e(/*! vue */2)),n=e(/*! vuex */27);function m(t){return t&&t.__esModule?t:{default:t}}function c(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var s=new(m(e(/*! ../../js_sdk/qqmap-wx-jssdk1.2/qqmap-wx-jssdk.js */31)).default)({key:"QL7BZ-ZCJKK-72IJS-A6NA6-HRJ3F-ZYB6J"}),d={data:function(){return{display:!1,commodity_id:0,scroll_height:700,commodityInfo:[],imageList:[],displayLocation:"",isInput:!1,inputComment:"",comment_page:1,showToast:!1,toastContent:""}},components:{WaterfallFlow:function(){return e.e(/*! import() | components/waterfall-flow/waterfall-flow */"components/waterfall-flow/waterfall-flow").then(e.bind(null,/*! ../../components/waterfall-flow/waterfall-flow.vue */160))}},computed:function(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{},i=Object.keys(e);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(e).filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.forEach(function(o){c(t,o,e[o])})}return t}({hasComment:function(){return 0!=this.commodityInfo.length&&0!=this.commodityInfo.commodity_comments.length}},(0,n.mapState)({user:function(t){return t.AuthUser}})),onLoad:function(t){var o=this;this.commodity_id=t.commodity_id;var e=this;i.default.prototype.$http.request({url:"/commodities/detail",method:"POST",params:{commodity_id:this.commodity_id}}).then(function(t){for(var i in o.commodityInfo=t.data.data,o.commodityInfo.commodity_images)o.imageList.push(o.commodityInfo.commodity_images[i].image_url);for(var n in o.commodityInfo.commodity_comments)o.formatTime(n);var m=o.commodityInfo.commodity_location.split(",");s.reverseGeocoder({location:{latitude:m[0],longitude:m[1]},success:function(t){e.displayLocation=t.result.address_component.city+t.result.address_component.district}})})},mounted:function(){var t=this;setTimeout(function(){t.display=!0},100),setTimeout(function(){t.getHeight()},200)},methods:{hideModal:function(t){this.showToast=!1},formatCommodityContent:function(){this.commodityInfo.commodity_description=this.commodityInfo.commodity_description.replace(/<br\/\>/g,"\n")},navigateCommodity:function(o){t.navigateTo({url:"/pages/commodity/commodity?commodity_id="+o})},displayMoreComments:function(){this.comment_page++},likeComment:function(t,o){var e=this;i.default.prototype.$http.request({url:"/likes/comment",method:"POST",params:{comment_id:o}}).then(function(o){e.commodityInfo.commodity_comments[t].comment_like=!e.commodityInfo.commodity_comments[t].comment_like,e.commodityInfo.commodity_comments[t].comment_like?e.commodityInfo.commodity_comments[t].comment_likes++:e.commodityInfo.commodity_comments[t].comment_likes--,e.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},likeCommodity:function(){var t=this;i.default.prototype.$http.request({url:"/likes/commodity",method:"POST",params:{commodity_id:this.commodity_id}}).then(function(o){t.commodityInfo.commodity_like=!t.commodityInfo.commodity_like,t.commodityInfo.commodity_like?t.commodityInfo.commodity_likes++:t.commodityInfo.commodity_likes--,t.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},CollectCommodity:function(){var t=this;i.default.prototype.$http.request({url:"/collections/commodity",method:"POST",params:{commodity_id:this.commodity_id}}).then(function(o){t.commodityInfo.commodity_collect=!t.commodityInfo.commodity_collect,t.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},submitComment:function(){var t=this;""==this.inputComment&&this.$refs.notification.open({type:"warn",content:"留言不能为空～",timeout:1500,isClick:!1}),i.default.prototype.$http.request({url:"/comments/commodity/create",method:"POST",params:{commodity_id:this.commodity_id,comment_content:this.inputComment,parent_id:0}}).then(function(o){t.commodityInfo.commodity_comments.unshift(o.data.data),t.formatTime(0),t.cancelInput(),t.inputComment="",t.$refs.notification.open({type:"success",content:"操作成功",timeout:1500,isClick:!1})})},beginInput:function(){if(""==this.user.authentication||null==this.user.authentication)return this.toastContent="先去认证身份，再进行留言操作～～",void(this.showToast=!0);this.isInput=!0},cancelInput:function(){this.isInput=!1},viewImage:function(o){t.previewImage({urls:this.imageList,current:o.currentTarget.dataset.url})},getHeight:function(){var o=this;t.getSystemInfo({success:function(e){o.screen_height=e.windowHeight,o.screen_width=e.windowWidth;t.createSelectorQuery().in(o).select("#scroll").boundingClientRect(function(t){o.scroll_height=o.screen_height-t.top-55}).exec()}})},formatTime:function(t){var o=this.commodityInfo.commodity_comments[t].comment_created.split(" "),e=(new Date).toLocaleDateString(),i=Math.abs(Math.ceil((new Date(e)-new Date(o[0]))/864e5)),n=7-i;if(0===i)this.commodityInfo.commodity_comments[t].display_time="今天 "+o[1];else if(1===i)this.commodityInfo.commodity_comments[t].display_time="昨天 "+o[1];else if(2===i)this.commodityInfo.commodity_comments[t].display_time="前天 "+o[1];else{if(n>0)switch(new Date(this.commodityInfo.commodity_comments[t].comment_created).getDay()){case 0:this.commodityInfo.commodity_comments[t].display_time="星期天 "+o[1];break;case 1:this.commodityInfo.commodity_comments[t].display_time="星期一 "+o[1];break;case 2:this.commodityInfo.commodity_comments[t].display_time="星期二 "+o[1];break;case 3:this.commodityInfo.commodity_comments[t].display_time="星期三 "+o[1];break;case 4:this.commodityInfo.commodity_comments[t].display_time="星期四 "+o[1];break;case 5:this.commodityInfo.commodity_comments[t].display_time="星期五 "+o[1];break;case 6:this.commodityInfo.commodity_comments[t].display_time="星期六 "+o[1]}else this.commodityInfo.commodity_comments[t].display_time=this.commodityInfo.commodity_comments[t].created_at}}}};o.default=d}).call(this,e(/*! ./node_modules/@dcloudio/uni-mp-qq/dist/index.js */1).default)}},[[131,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-qq/pages/commodity/commodity.js.map